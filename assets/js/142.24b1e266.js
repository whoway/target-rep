(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{474:function(s,a,t){"use strict";t.r(a);var n=t(25),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"cmake快速使用笔记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cmake快速使用笔记"}},[s._v("#")]),s._v(" CMake快速使用笔记")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("font "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("style")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"background:yellow"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("font "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("style")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"background:pink"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("font "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("style")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"background: MediumSpringGreen"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录"}},[s._v("#")]),s._v(" 目录")]),s._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#目录"}},[s._v("目录")])]),a("li",[a("a",{attrs:{href:"#_1-介绍cmake"}},[s._v("1.介绍CMake")])]),a("li",[a("a",{attrs:{href:"#_2-cmake安装"}},[s._v("2.CMake安装")])]),a("li",[a("a",{attrs:{href:"#_3-cmake的步骤「演示」"}},[s._v("3.CMake的步骤「演示」")]),a("ul",[a("li",[a("a",{attrs:{href:"#_1-步骤一-写一个-main-cpp"}},[s._v("1.步骤一，写一个main.cpp")])]),a("li",[a("a",{attrs:{href:"#_2-步骤二-写-cmakelists-txt"}},[s._v("2.步骤二，写CMakeLists.txt")])]),a("li",[a("a",{attrs:{href:"#_3-步骤三、使用-cmake-「生成makefile文件」"}},[s._v("3.步骤三、使用cmake .「生成makefile文件」")])]),a("li",[a("a",{attrs:{href:"#_4-使用make命令编译"}},[s._v("4.使用make命令编译")])])])]),a("li",[a("a",{attrs:{href:"#_4-cmake中「演示」的语法介绍"}},[s._v("4.CMake中「演示」的语法介绍")]),a("ul",[a("li",[a("a",{attrs:{href:"#🔴project关键字-project"}},[s._v("🔴PROJECT关键字(project)")])]),a("li",[a("a",{attrs:{href:"#🔴set关键字-set"}},[s._v("🔴SET关键字(set)")])]),a("li",[a("a",{attrs:{href:"#🔴message关键字-message"}},[s._v("🔴MESSAGE关键字(message)")])]),a("li",[a("a",{attrs:{href:"#🔴add-executable关键字-add-executable"}},[s._v("🔴ADDEXECUTABLE关键字(addexecutable)")])])])]),a("li",[a("a",{attrs:{href:"#_5-语法的基本原则"}},[s._v("5.语法的基本原则")]),a("ul",[a("li",[a("a",{attrs:{href:"#_5-1-语法注意事项"}},[s._v("5.1.语法注意事项")])])])]),a("li",[a("a",{attrs:{href:"#_6-内部-外部构建"}},[s._v("6.内部/外部构建")])]),a("li",[a("a",{attrs:{href:"#_7-让「演示」看起来更像一个工程⭐️"}},[s._v("7.让「演示」看起来更像一个工程⭐️")]),a("ul",[a("li",[a("a",{attrs:{href:"#_7-1-将「目标文件」放入构建目录的-「bin-子目录」"}},[s._v("7.1.将「目标文件」放入构建目录的 「bin 子目录」")])]),a("li",[a("a",{attrs:{href:"#⭐️add-subdirectory-指令-add-subdirectory"}},[s._v("⭐️ADDSUBDIRECTORY 指令(addsubdirectory)")])]),a("li",[a("a",{attrs:{href:"#_7-3-更改二进制的保存路径「到bin到目录」"}},[s._v("7.3.更改二进制的保存路径「到bin到目录」")])])])]),a("li",[a("a",{attrs:{href:"#_8-安装⭐️"}},[s._v("8.安装⭐️")]),a("ul",[a("li",[a("a",{attrs:{href:"#_8-1-如何安装helloword"}},[s._v("8.1.如何安装HelloWord")])]),a("li",[a("a",{attrs:{href:"#_8-2-安装文件copyright和readme"}},[s._v("8.2.安装文件COPYRIGHT和README")])]),a("li",[a("a",{attrs:{href:"#_8-3-安装脚本runhello-sh"}},[s._v("8.3.安装脚本runhello.sh")])]),a("li",[a("a",{attrs:{href:"#_8-4-安装-doc-中的-hello-txt"}},[s._v("8.4.安装 doc 中的 hello.txt")])]),a("li",[a("a",{attrs:{href:"#_8-5-安装过程"}},[s._v("8.5.安装过程")])])])]),a("li",[a("a",{attrs:{href:"#_9-静态库和动态库的构建"}},[s._v("9.静态库和动态库的构建")]),a("ul",[a("li",[a("a",{attrs:{href:"#_9-1-构建实例"}},[s._v("9.1.构建实例")])]),a("li",[a("a",{attrs:{href:"#_9-2-add-library"}},[s._v("9.2.ADD_LIBRARY")])]),a("li",[a("a",{attrs:{href:"#_9-3-同时构建静态和动态库"}},[s._v("9.3.同时构建静态和动态库")])]),a("li",[a("a",{attrs:{href:"#_9-4-set-target-properties"}},[s._v("9.4.SET_TARGET_PROPERTIES")])]),a("li",[a("a",{attrs:{href:"#_9-5-动态库的版本号"}},[s._v("9.5.动态库的版本号")])]),a("li",[a("a",{attrs:{href:"#_9-6-安装共享库和头文件"}},[s._v("9.6.安装共享库和头文件")])]),a("li",[a("a",{attrs:{href:"#_9-7-使用外部共享库和头文件"}},[s._v("9.7.使用外部共享库和头文件")])]),a("li",[a("a",{attrs:{href:"#_9-8-解决-make后头文件找不到的问题"}},[s._v("9.8.解决：make后头文件找不到的问题")])]),a("li",[a("a",{attrs:{href:"#_9-9-解决-找到引用的函数问题"}},[s._v("9.9.解决：找到引用的函数问题")])]),a("li",[a("a",{attrs:{href:"#_9-10-特殊的环境变量-cmake-include-path-和-cmake-library-path"}},[s._v("9.10.特殊的环境变量 CMAKE_INCLUDE_PATH 和 CMAKE_LIBRARY_PATH")])])])]),a("li",[a("a",{attrs:{href:"#_10-环境变量清单"}},[s._v("10.环境变量清单")])]),a("li",[a("a",{attrs:{href:"#_11-向-cmake-添加分析标志以使用-gprof"}},[s._v("11.向 CMake 添加分析标志以使用 gprof")])]),a("li",[a("a",{attrs:{href:"#_12-cmake-指定编译器为gcc-clang"}},[s._v("12.CMake 指定编译器为gcc/clang")])]),a("li",[a("a",{attrs:{href:"#参考资料"}},[s._v("参考资料")])])])]),a("p"),s._v(" "),a("p",[s._v("[TOC]")]),s._v(" "),a("h2",{attrs:{id:"_1-介绍cmake"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-介绍cmake"}},[s._v("#")]),s._v(" 1.介绍CMake")]),s._v(" "),a("p",[s._v("cmake的定义是什么 ？-——高级编译配置工具")]),s._v(" "),a("p",[s._v("当多个人用"),a("strong",[s._v("不同的语言")]),s._v("或者"),a("strong",[s._v("编译器")]),s._v("开发一个项目，最终要输出一个"),a("strong",[s._v("可执行文件")]),s._v("或者"),a("strong",[s._v("共享库")]),s._v("（dll，so等等）这时候神器就出现了——CMake！")]),s._v(" "),a("ul",[a("li",[s._v("所有操作都是通过"),a("font",{staticStyle:{background:"yellow"}},[s._v("编译CMakeLists.txt")]),s._v("来完成的—简单")],1)]),s._v(" "),a("p",[s._v("官方网站是 "),a("a",{attrs:{href:"http://www.cmake.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("www.cmake.org"),a("OutboundLink")],1),s._v("，可以通过访问官方网站获得更多关于 cmake 的信息")]),s._v(" "),a("p",[s._v("学习CMake的目的，为将来处理大型的C/C++/JAVA项目做准备")]),s._v(" "),a("h2",{attrs:{id:"_2-cmake安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-cmake安装"}},[s._v("#")]),s._v(" 2.CMake安装")]),s._v(" "),a("p",[s._v("1、"),a("font",{staticStyle:{background:"yellow"}},[s._v("绝大多数的linux系统")]),s._v("已经安装了CMake")],1),s._v(" "),a("p",[s._v("2、Windows或某些没有安装过的linux系统，去"),a("a",{attrs:{href:"http://www.cmake.org/HTML/Download.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://www.cmake.org/HTML/Download.htm"),a("OutboundLink")],1),s._v("l  可以下载安装")]),s._v(" "),a("h2",{attrs:{id:"_3-cmake的步骤「演示」"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-cmake的步骤「演示」"}},[s._v("#")]),s._v(" 3.CMake的步骤「演示」")]),s._v(" "),a("h3",{attrs:{id:"_1-步骤一-写一个main-cpp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-步骤一-写一个main-cpp"}},[s._v("#")]),s._v(" 1.步骤一，写一个"),a("code",[s._v("main.cpp")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("main.cpp")])])]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//main.cpp")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("<iostream>")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\nstd"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello word"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"_2-步骤二-写cmakelists-txt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-步骤二-写cmakelists-txt"}},[s._v("#")]),s._v(" 2.步骤二，写"),a("code",[s._v("CMakeLists.txt")])]),s._v(" "),a("p",[s._v("「注意"),a("code",[s._v("CMakeLists.txt")]),s._v("这个词语要"),a("strong",[s._v("严格区分大小写")]),s._v("的」")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token expression"}},[s._v("CMakeLists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("PROJECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HELLO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SRC_LIST main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("MESSAGE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("STATUS "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"This is BINARY dir "')]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("HELLO_BINARY_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("MESSAGE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("STATUS "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"This is SOURCE dir "')]),s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("HELLO_SOURCE_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ADD_EXECUTABLE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("SRC_LIST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"_3-步骤三、使用cmake-「生成makefile文件」"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-步骤三、使用cmake-「生成makefile文件」"}},[s._v("#")]),s._v(" 3.步骤三、使用"),a("code",[s._v("cmake .")]),s._v("「生成makefile文件」")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[s._v("cmake "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n\n输出：\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost cmake"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# cmake "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nCMake "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("Warning")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" in CMakeLists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  Syntax Warning in cmake code at\n\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("cmake"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("CMakeLists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),s._v("\n\n  Argument "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" separated from preceding token by whitespace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nThis warning is "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" project developers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("  Use "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Wno"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dev to suppress it"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" The C compiler identification is GNU "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" The CXX compiler identification is GNU "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working C compiler"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("cc\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working C compiler"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("cc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" works\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Detecting C compiler ABI info\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Detecting C compiler ABI info "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" done\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working CXX compiler"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("c"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working CXX compiler"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("c"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" works\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Detecting CXX compiler ABI info\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Detecting CXX compiler ABI info "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" done\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" This is BINARY dir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("cmake\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" This is SOURCE dir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("cmake\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Configuring done\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Generating done\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v(" Build files have been written to"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("cmake\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("p",[s._v("目录下就生成了这些文件")]),s._v(" "),a("ul",[a("li",[a("font",{staticStyle:{background:"yellow"}},[s._v("CMakeFiles（"),a("strong",[s._v("文件夹")]),s._v("）")])],1),s._v(" "),a("li",[s._v("CMakeCache.txt")]),s._v(" "),a("li",[s._v("cmake_install.cmake 等文件")]),s._v(" "),a("li",[s._v("并且生成了Makefile.")])]),s._v(" "),a("p",[s._v("现在不需要理会这些文件的作用，以后你也可以不去理会。")]),s._v(" "),a("p",[s._v("最关键的是，它自动生成了Makefile.")]),s._v(" "),a("h3",{attrs:{id:"_4-使用make命令编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-使用make命令编译"}},[s._v("#")]),s._v(" 4.使用make命令编译")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[s._v("huwei@dell"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v("$ make\nScanning dependencies of target hello\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Building CXX object CMakeFiles"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("o\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Linking CXX executable hello\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Built target hello\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("最终生成了Hello的可执行程序")]),s._v(" "),a("h2",{attrs:{id:"_4-cmake中「演示」的语法介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-cmake中「演示」的语法介绍"}},[s._v("#")]),s._v(" 4.CMake中「演示」的语法介绍")]),s._v(" "),a("h3",{attrs:{id:"🔴project关键字-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🔴project关键字-project"}},[s._v("#")]),s._v(" 🔴PROJECT关键字(project)")]),s._v(" "),a("blockquote",[a("p",[s._v("可以用来指定"),a("strong",[s._v("工程的名字")]),s._v("和"),a("strong",[s._v("支持的语言")]),s._v("，默认支持所有语言")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("PROJECT (HELLO)")]),s._v("   指定了工程的名字，并且支持所有语言—建议")]),s._v(" "),a("li",[a("code",[s._v("PROJECT (HELLO CXX)")]),s._v("      指定了工程的名字，并且支持语言是C++")]),s._v(" "),a("li",[a("code",[s._v("PROJECT (HELLO C CXX)")]),s._v("      指定了工程的名字，并且支持语言是C和C++")])]),s._v(" "),a("p",[s._v("该指定==隐式定义==了两个CMAKE的变量")]),s._v(" "),a("p",[a("code",[s._v("<projectname>_BINARY_DIR")]),s._v("，本例中是 "),a("code",[s._v("HELLO_BINARY_DIR")])]),s._v(" "),a("p",[a("code",[s._v("<projectname>_SOURCE_DIR")]),s._v("，本例中是 "),a("code",[s._v("HELLO_SOURCE_DIR")])]),s._v(" "),a("p",[s._v("MESSAGE关键字就可以直接使用这两个变量，当前都指向当前的工作目录，后面会讲==外部编译==")]),s._v(" "),a("p",[s._v("问题：如果改了工程名，这两个变量名也会改变")]),s._v(" "),a("p",[s._v("解决：又定义两个预定义变量："),a("code",[s._v("PROJECT_BINARY_DIR")]),s._v("和"),a("code",[s._v("PROJECT_SOURCE_DIR")]),s._v("，这两个变量和"),a("code",[s._v("HELLO_BINARY_DIR")]),s._v("，"),a("code",[s._v("HELLO_SOURCE_DIR")]),s._v("是一致的。所以改了工程名也没有关系")]),s._v(" "),a("h3",{attrs:{id:"🔴set关键字-set"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🔴set关键字-set"}},[s._v("#")]),s._v(" 🔴SET关键字(set)")]),s._v(" "),a("ul",[a("li",[a("font",{staticStyle:{background:"yellow"}},[s._v("set")]),s._v(",设置")],1)]),s._v(" "),a("blockquote",[a("p",[s._v("用来"),a("strong",[s._v("显示")]),s._v("的"),a("strong",[s._v("指定变量")]),s._v("的")])]),s._v(" "),a("p",[a("code",[s._v("SET(SRC_LIST main.cpp)")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("SRC_LIST")]),s._v("变量就包含了main.cpp")])]),s._v(" "),a("p",[s._v("也可以 "),a("code",[s._v("SET(SRC_LIST main.cpp t1.cpp t2.cpp)")])]),s._v(" "),a("h3",{attrs:{id:"🔴message关键字-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🔴message关键字-message"}},[s._v("#")]),s._v(" 🔴MESSAGE关键字(message)")]),s._v(" "),a("blockquote",[a("p",[s._v("向终端"),a("strong",[s._v("输出")]),s._v("用户自定义的信息")])]),s._v(" "),a("p",[s._v("主要包含三种信息：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("SEND_ERROR")]),s._v("，产生错误，生成过程被跳过。")]),s._v(" "),a("li",[a("code",[s._v("SATUS")]),s._v("，输出前缀为"),a("code",[s._v("—")]),s._v("的信息。")]),s._v(" "),a("li",[a("code",[s._v("FATAL_ERROR")]),s._v("，立即"),a("strong",[s._v("终止")]),s._v("所有 cmake 过程.")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("MESSAGE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("STATUS "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"This is BINARY dir "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HELLO_BINARY_DIR}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nMESSAGE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("STATUS "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"This is SOURCE dir "')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${HELLO_SOURCE_DIR}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("huwei@dell:~$ cmake "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\nCMake Warning "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" at CMakeLists.txt:7:\n  Syntax Warning "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" cmake code at "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("column")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),s._v("\n\n  Argument not separated from preceding token by whitespace.\nThis warning is "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" project developers.  Use -Wno-dev to suppress it.\n\n-- The C compiler identification is GNU "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.4")]),s._v(".0\n-- The CXX compiler identification is GNU "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.4")]),s._v(".0\n-- Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working C compiler: /usr/bin/cc\n-- Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Detecting C compile features\n-- Detecting C compile features - "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working CXX compiler: /usr/bin/c++\n-- Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Detecting CXX compile features\n-- Detecting CXX compile features - "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- This is BINARY "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" /home/huwei  🔴\n-- This is SOURCE "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" /home/huwei  🔴\n-- Configuring "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Generating "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Build files have been written to: /home/huwei\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("h3",{attrs:{id:"🔴add-executable关键字-add-executable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#🔴add-executable关键字-add-executable"}},[s._v("#")]),s._v(" 🔴ADD_EXECUTABLE关键字(add_executable)")]),s._v(" "),a("blockquote",[a("p",[s._v("生成可执行文件(add_executable)")])]),s._v(" "),a("p",[a("code",[s._v("ADD_EXECUTABLE(hello ${SRC_LIST})")])]),s._v(" "),a("ul",[a("li",[s._v("生成的可执行文件名是hello，源文件读取变量"),a("code",[s._v("SRC_LIST")]),s._v("中的内容")])]),s._v(" "),a("p",[s._v("也可以直接写 "),a("code",[s._v("ADD_EXECUTABLE(hello main.cpp)")])]),s._v(" "),a("p",[s._v("上述例子可以简化的写成")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("PROJECT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HELLO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nADD_EXECUTABLE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello main.cpp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("注意："),a("strong",[s._v("工程名的 HELLO")]),s._v(" 和生成的"),a("strong",[s._v("可执行文件 hello")]),s._v(" 是"),a("strong",[s._v("没有任何关系")]),s._v("的")])]),s._v(" "),a("h2",{attrs:{id:"_5-语法的基本原则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-语法的基本原则"}},[s._v("#")]),s._v(" 5.语法的基本原则")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("==变量使用"),a("code",[s._v("${}")]),s._v("方式取值==，但是在 IF 控制语句中是直接使用变量名")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("指令(参数 1 参数 2...)")])]),s._v(" "),a("ul",[a("li",[s._v("参数使用括弧括起，参数之间使用空格或分号分开。 以上面的 "),a("code",[s._v("ADD_EXECUTABLE")]),s._v(" 指令为例，如果存在另外一个 "),a("code",[s._v("func.cpp")]),s._v(" 源文件，就要写成："),a("code",[s._v("ADD_EXECUTABLE(hello main.cpp func.cpp)")]),s._v("或者"),a("code",[s._v("ADD_EXECUTABLE(hello main.cpp;func.cpp)")])])])]),s._v(" "),a("li",[a("p",[s._v("指令是"),a("strong",[s._v("大小写无关")]),s._v("的，参数和变量是大小写相关的。但推荐你全部使用大写指令")])])]),s._v(" "),a("h3",{attrs:{id:"_5-1-语法注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-语法注意事项"}},[s._v("#")]),s._v(" 5.1.语法注意事项")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("SET(SRC_LIST main.cpp)")]),s._v(" 可以写成 "),a("code",[s._v("SET(SRC_LIST “main.cpp”)")]),s._v("，==如果"),a("strong",[s._v("源文件名")]),s._v("中含有"),a("strong",[s._v("空格")]),s._v("，就"),a("strong",[s._v("必须")]),s._v("要加"),a("strong",[s._v("双引号")]),s._v("==")]),s._v(" "),a("li",[a("code",[s._v("ADD_EXECUTABLE(hello main)")]),s._v(" 后缀可以不行，他会自动去找"),a("code",[s._v(".c")]),s._v("和"),a("code",[s._v(".cpp")]),s._v("，最好不要这样写，可能会有这两个文件"),a("code",[s._v("main.cpp")]),s._v("和"),a("code",[s._v("main")])])]),s._v(" "),a("h2",{attrs:{id:"_6-内部-外部构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-内部-外部构建"}},[s._v("#")]),s._v(" 6.内部/外部构建")]),s._v(" "),a("ul",[a("li",[a("font",{staticStyle:{background:"yellow"}},[s._v("上述例子就是内部构建")]),s._v("，他生产的临时文件特别多，不方便清理")],1),s._v(" "),a("li",[s._v("外部构建，就会把"),a("strong",[s._v("生成的临时文件")]),s._v("放在"),a("strong",[s._v("build目录")]),s._v("下，不会对源文件有任何影响\n"),a("ul",[a("li",[a("strong",[s._v("强烈建议使用外部构建方式")])]),s._v(" "),a("li",[s._v("比如gromacs项目就是外部构建")])])])]),s._v(" "),a("blockquote",[a("p",[s._v("外部构建方式举例")])]),s._v(" "),a("p",[s._v("方法（手动）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("//例子目录，CMakeLists.txt和上面例子一致\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost cmake"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/root/cmake\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost cmake"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("198")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":59 CMakeLists.txt\n-rw-r--r--. "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("76")]),s._v(" Dec "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" 00:18 main.cpp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("1.建立一个build目录，可以在任何地方，建议在当前目录下")])]),s._v(" "),a("li",[a("p",[s._v("2.cd进入build，运行"),a("code",[s._v("cmake ..")]),s._v("    当然"),a("code",[s._v("..")]),s._v("表示上一级目录")]),s._v(" "),a("ul",[a("li",[s._v("你可以写"),a("code",[s._v("CMakeLists.txt")]),a("strong",[s._v("所在的绝对路径")]),s._v("，生成的文件都在build目录下了")])])]),s._v(" "),a("li",[a("p",[s._v("3.在build目录下，运行make来构建工程")])])]),s._v(" "),a("p",[s._v("举例如下：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" build\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" install-cmake\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" build\ncmake "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DCMAKE_INSTALL_PREFIX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=~")]),s._v("/exp/gromacs-2020.5/install-cmake  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DGMX_SIMD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("None "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DGMX_BUILD_OWN_FFTW")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON   "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-DREGRESSIONTEST_DOWNLOAD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("注意"),a("strong",[s._v("外部构建")]),s._v("的==两个变量==")]),s._v(" "),a("p",[s._v("1."),a("code",[s._v("HELLO_SOURCE_DIR")]),s._v("  还是==工程路径==")]),s._v(" "),a("p",[s._v("2."),a("code",[s._v("HELLO_BINARY_DIR")]),s._v("   ==编译路径== 也就是 "),a("code",[s._v("/root/cmake/bulid")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("huwei@dell:~/auto/exp/build$ cmake "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\nCMake Warning "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" at CMakeLists.txt:9:\n  Syntax Warning "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" cmake code at "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("column")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),s._v("\n\n  Argument not separated from preceding token by whitespace.\nThis warning is "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" project developers.  Use -Wno-dev to suppress it.\n\n-- The C compiler identification is GNU "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.4")]),s._v(".0\n-- The CXX compiler identification is GNU "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.4")]),s._v(".0\n-- Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working C compiler: /usr/bin/cc\n-- Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Detecting C compile features\n-- Detecting C compile features - "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working CXX compiler: /usr/bin/c++\n-- Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Detecting CXX compile features\n-- Detecting CXX compile features - "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- This is BINARY "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" /home/huwei/auto/exp/build\n-- This is SOURCE "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" /home/huwei/auto/exp\n-- Configuring "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Generating "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Build files have been written to: /home/huwei/auto/exp/build\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("h2",{attrs:{id:"_7-让「演示」看起来更像一个工程⭐️"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-让「演示」看起来更像一个工程⭐️"}},[s._v("#")]),s._v(" 7.让「演示」看起来更像一个工程⭐️")]),s._v(" "),a("p",[a("strong",[s._v("目标")]),s._v("：")]),s._v(" "),a("ul",[a("li",[s._v("为工程添加一个子目录 "),a("code",[s._v("src")]),s._v("，用来放置"),a("strong",[s._v("工程源代码")])]),s._v(" "),a("li",[s._v("添加一个子目录 "),a("code",[s._v("doc")]),s._v("，用来放置这个"),a("strong",[s._v("工程的文档")]),s._v(" "),a("code",[s._v("hello.txt")])]),s._v(" "),a("li",[s._v("在工程目录添加文本文件 "),a("code",[s._v("COPYRIGHT")]),s._v(",  "),a("code",[s._v("README")])]),s._v(" "),a("li",[s._v("在工程目录添加一个 "),a("code",[s._v("runhello.sh")]),s._v("脚本，用来调用 hello 二进制")]),s._v(" "),a("li",[s._v("将构建后的目标文件放入"),a("strong",[s._v("构建目录")]),s._v("的 "),a("code",[s._v("bin 子目录")])]),s._v(" "),a("li",[s._v("将 doc目录的内容以及 "),a("code",[s._v("COPYRIGHT/README")]),s._v(" 安装到"),a("code",[s._v("/usr/share/doc/cmake/")])])]),s._v(" "),a("h3",{attrs:{id:"_7-1-将「目标文件」放入构建目录的-「bin-子目录」"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-将「目标文件」放入构建目录的-「bin-子目录」"}},[s._v("#")]),s._v(" 7.1.将「目标文件」放入构建目录的 「bin 子目录」")]),s._v(" "),a("p",[a("strong",[s._v("每个目录")]),s._v("下都要有一个"),a("code",[s._v("CMakeLists.txt")]),s._v("说明")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost cmake"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# tree\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n├── build\n├── CMakeLists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n└── src\n    ├── CMakeLists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n    └── main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("strong",[s._v("外层")]),s._v("CMakeLists.txt")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("PROJECT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HELLO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ADD_SUBDIRECTORY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("src bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("src下")]),s._v("的CMakeLists.txt")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ADD_EXECUTABLE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"⭐️add-subdirectory-指令-add-subdirectory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⭐️add-subdirectory-指令-add-subdirectory"}},[s._v("#")]),s._v(" ⭐️ADD_SUBDIRECTORY 指令(add_subdirectory)")]),s._v(" "),a("p",[s._v("作用1:告诉cmake，我还有1个目录")]),s._v(" "),a("p",[s._v("作用2:我要在src下写上1个bin")]),s._v(" "),a("p",[s._v("注意：我们的ADD_SUBDIRECTORY是在哪个CMakeLists里面写的呢？是在最外层，来告诉cmake有src")]),s._v(" "),a("p",[a("code",[s._v("ADD_SUBDIRECTORY(source_dir [binary_dir] [EXCLUDE_FROM_ALL])")])]),s._v(" "),a("p",[s._v("源码目录【二进制目录】")]),s._v(" "),a("ul",[a("li",[s._v("这个指令用于向当前工程添加存放源文件的子目录，并可以指定中间二进制和目标二进制存放的位置")]),s._v(" "),a("li",[a("code",[s._v("EXCLUDE_FROM_ALL")]),s._v("函数是将写的目录从编译中排除，如程序中的example")]),s._v(" "),a("li",[a("code",[s._v("ADD_SUBDIRECTORY(src bin)")]),s._v(" "),a("ul",[a("li",[s._v("将 "),a("strong",[s._v("src 子目录")]),s._v("加入工程并指定"),a("strong",[s._v("编译输出")]),s._v("(包含编译中间结果)"),a("strong",[s._v("路径为bin 目录")]),s._v("「自动新建bin」\n"),a("ul",[a("li",[s._v("如果"),a("strong",[s._v("不进行")]),s._v(" bin 目录的指定，那么"),a("strong",[s._v("编译结果")]),s._v("(包括中间结果)都将存放在"),a("code",[s._v("build/src")]),s._v("目录")])])])])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("huwei@dell:~/auto/exp$  tree\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n├── build\n├── CMakeLists.txt\n└── src\n    ├── CMakeLists.txt\n    └── main.cpp\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" directories, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" files\nhuwei@dell:~/auto/exp$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" build/\nhuwei@dell:~/auto/exp/build$ cmake "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-- The C compiler identification is GNU "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.4")]),s._v(".0\n-- The CXX compiler identification is GNU "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.4")]),s._v(".0\n-- Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working C compiler: /usr/bin/cc\n-- Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Detecting C compile features\n-- Detecting C compile features - "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working CXX compiler: /usr/bin/c++\n-- Check "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Detecting CXX compile features\n-- Detecting CXX compile features - "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\nCMake Warning "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" CMakeLists.txt:\n  No cmake_minimum_required "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" is present.  A line of code such as\n\n    cmake_minimum_required"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("VERSION "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n  should be added at the "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" of the file.  The version specified may be lower\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" you wish to support older CMake versions "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" this project.  For "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v("\n  information run "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cmake --help-policy CMP0000"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\nThis warning is "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" project developers.  Use -Wno-dev to suppress it.\n\n-- Configuring "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Generating "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n-- Build files have been written to: /home/huwei/auto/exp/build\nhuwei@dell:~/auto/exp/build$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nbin⭐️  CMakeCache.txt  CMakeFiles  cmake_install.cmake  Makefile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br")])]),a("ul",[a("li",[s._v("然后make，发现在bin里面")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("huwei@dell:~/auto/exp/build$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\nScanning dependencies of target hello\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Building CXX object bin/CMakeFiles/hello.dir/main.o\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Linking CXX executable hello\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Built target hello\nhuwei@dell:~/auto/exp/build$ l\nbin/  CMakeCache.txt  CMakeFiles/  cmake_install.cmake  Makefile\nhuwei@dell:~/auto/exp/build$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" bin/⭐️\nCMakeFiles  cmake_install.cmake  hello ⭐️ Makefile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"_7-3-更改二进制的保存路径「到bin到目录」"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-更改二进制的保存路径「到bin到目录」"}},[s._v("#")]),s._v(" 7.3.更改二进制的保存路径「到bin到目录」")]),s._v(" "),a("p",[s._v("SET 指令重新定义 "),a("code",[s._v("EXECUTABLE_OUTPUT_PATH")]),s._v(" 和 "),a("code",[s._v("LIBRARY_OUTPUT_PATH")]),s._v(" 变量 来指定最终的目标二进制的位置")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("SET(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin)")])]),s._v(" "),a("li",[a("code",[s._v("SET(LIBRARY_OUTPUT_PATH ${PROJECT_BINARY_DIR}/lib)")])])]),s._v(" "),a("p",[s._v("思考：加载哪个CMakeLists.txt当中")]),s._v(" "),a("p",[s._v("哪里要改变目标存放路径，就在哪里加入上述的定义，所以应该"),a("strong",[s._v("在src下")]),s._v("的CMakeLists.txt下写")]),s._v(" "),a("h2",{attrs:{id:"_8-安装⭐️"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-安装⭐️"}},[s._v("#")]),s._v(" 8.安装⭐️")]),s._v(" "),a("ul",[a("li",[s._v("一种是从代码编译后直接 "),a("code",[s._v("make install")]),s._v(" 安装")]),s._v(" "),a("li",[s._v("一种是打包时的"),a("strong",[s._v("指定目录")]),s._v("安装。\n"),a("ul",[a("li",[s._v("简单的可以这样指定目录："),a("code",[s._v("make install DESTDIR=/tmp/test")])]),s._v(" "),a("li",[s._v("稍微复杂一点可以这样指定目录："),a("code",[s._v("./configure –prefix=/usr")]),s._v(" "),a("ul",[a("li",[s._v("这个用法比较高级一点！")])])])])])]),s._v(" "),a("h3",{attrs:{id:"_8-1-如何安装helloword"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-如何安装helloword"}},[s._v("#")]),s._v(" 8.1.如何安装HelloWord")]),s._v(" "),a("p",[s._v("使用CMAKE一个新的指令：INSTALL")]),s._v(" "),a("p",[s._v("INSTALL的安装可以包括：二进制、动态库、静态库以及文件、目录、脚本等")]),s._v(" "),a("p",[s._v("使用CMAKE一个新的"),a("strong",[s._v("变量")]),s._v("："),a("code",[s._v("CMAKE_INSTALL_PREFIX")])]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 目录树结构")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost cmake"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# tree\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n├── build\n├── CMakeLists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n├── COPYRIGHT\n├── doc\n│   └── hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n├── README\n├── runhello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sh\n└── src\n    ├── CMakeLists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n    └── main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpp\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" directories"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" files\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("h3",{attrs:{id:"_8-2-安装文件copyright和readme"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-安装文件copyright和readme"}},[s._v("#")]),s._v(" 8.2.安装文件COPYRIGHT和README")]),s._v(" "),a("p",[s._v("INSTALL(FILES COPYRIGHT README DESTINATION share/doc/cmake/)")]),s._v(" "),a("p",[s._v("FILES：文件")]),s._v(" "),a("p",[s._v("DESTINATION：")]),s._v(" "),a("p",[s._v("1、写绝对路径")]),s._v(" "),a("p",[s._v("2、可以写相对路径，相对路径实际路径是："),a("code",[s._v("${CMAKE_INSTALL_PREFIX}/<DESTINATION 定义的路径>")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("CMAKE_INSTALL_PREFIX")]),s._v("  默认是在 "),a("code",[s._v("/usr/local/")])]),s._v(" "),a("li",[a("code",[s._v("cmake -DCMAKE_INSTALL_PREFIX=/usr")]),s._v("    在cmake的时候指定"),a("code",[s._v("CMAKE_INSTALL_PREFIX")]),s._v("变量的路径")])]),s._v(" "),a("h3",{attrs:{id:"_8-3-安装脚本runhello-sh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-安装脚本runhello-sh"}},[s._v("#")]),s._v(" 8.3.安装脚本runhello.sh")]),s._v(" "),a("p",[s._v("PROGRAMS：非目标文件的可执行程序安装(比如脚本之类)")]),s._v(" "),a("p",[a("code",[s._v("INSTALL(PROGRAMS runhello.sh DESTINATION bin)")])]),s._v(" "),a("p",[s._v("说明：实际安装到的是"),a("code",[s._v("/usr/bin")])]),s._v(" "),a("h3",{attrs:{id:"_8-4-安装-doc-中的-hello-txt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-4-安装-doc-中的-hello-txt"}},[s._v("#")]),s._v(" 8.4.安装 doc 中的 hello.txt")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("一、是通过在 doc 目录建立CMakeLists.txt ，通过install下的file")])]),s._v(" "),a("li",[a("p",[s._v("二、是直接在工程目录通过")]),s._v(" "),a("p",[a("code",[s._v("INSTALL(DIRECTORY doc/ DESTINATION share/doc/cmake)")])])])]),s._v(" "),a("p",[s._v("DIRECTORY 后面连接的是所在 Source 目录的相对路径")]),s._v(" "),a("p",[s._v("注意：abc 和 abc/有很大的区别")]),s._v(" "),a("p",[s._v("目录名不以/结尾：这个目录将被安装为目标路径下的")]),s._v(" "),a("p",[s._v("目录名以/结尾：将这个目录中的内容安装到目标路径")]),s._v(" "),a("h3",{attrs:{id:"_8-5-安装过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-5-安装过程"}},[s._v("#")]),s._v(" 8.5.安装过程")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("cmake "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"_9-静态库和动态库的构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-静态库和动态库的构建"}},[s._v("#")]),s._v(" 9.静态库和动态库的构建")]),s._v(" "),a("p",[s._v("任务：")]),s._v(" "),a("p",[s._v("１，建立一个静态库和动态库，提供 HelloFunc 函数供其他程序编程使用，HelloFunc 向终端输出 Hello World 字符串。")]),s._v(" "),a("p",[s._v("２，安装头文件与共享库。")]),s._v(" "),a("p",[s._v("静态库和动态库的区别")]),s._v(" "),a("ul",[a("li",[s._v("静态库的扩展名一般为“.a”或“.lib”；动态库的扩展名一般为“.so”或“.dll”。")]),s._v(" "),a("li",[s._v("静态库在编译时会直接整合到目标程序中，编译成功的可执行文件可独立运行")]),s._v(" "),a("li",[s._v("动态库在编译时不会放到连接的目标程序中，即可执行文件无法单独运行。")])]),s._v(" "),a("h3",{attrs:{id:"_9-1-构建实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-构建实例"}},[s._v("#")]),s._v(" 9.1.构建实例")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost cmake2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# tree\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n├── build\n├── CMakeLists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n└── lib\n    ├── CMakeLists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n    ├── hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpp\n    └── hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("h\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("hello.h中的内容")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("ifndef")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[s._v("HELLO_H")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token macro-name"}},[s._v("Hello_H")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("HelloFunc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("endif")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("hello.cpp中的内容")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello.h"')])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("<iostream>")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("HelloFunc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    std"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("cout "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" std"),a("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[s._v("::")]),s._v("endl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("项目中的cmake内容")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("PROJECT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HELLO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ADD_SUBDIRECTORY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("lib bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("lib中CMakeLists.txt中的内容")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LIBHELLO_SRC hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ADD_LIBRARY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello SHARED $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("LIBHELLO_SRC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_9-2-add-library"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-add-library"}},[s._v("#")]),s._v(" 9.2."),a("code",[s._v("ADD_LIBRARY")])]),s._v(" "),a("p",[s._v("ADD_LIBRARY(hello SHARED ${LIBHELLO_SRC})")]),s._v(" "),a("ul",[a("li",[s._v("hello：就是正常的库名，生成的名字前面会加上lib，最终产生的文件是libhello.so")]),s._v(" "),a("li",[s._v("SHARED，动态库    STATIC，静态库")]),s._v(" "),a("li",[s._v("${LIBHELLO_SRC} ：源文件")])]),s._v(" "),a("h3",{attrs:{id:"_9-3-同时构建静态和动态库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-同时构建静态和动态库"}},[s._v("#")]),s._v(" 9.3.同时构建静态和动态库")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 如果用这种方式，只会构建一个动态库，不会构建出静态库，虽然静态库的后缀是.a")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ADD_LIBRARY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello SHARED $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("LIBHELLO_SRC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ADD_LIBRARY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello STATIC $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("LIBHELLO_SRC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 修改静态库的名字，这样是可以的，但是我们往往希望他们的名字是相同的，只是后缀不同而已")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ADD_LIBRARY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello SHARED $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("LIBHELLO_SRC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ADD_LIBRARY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello_static STATIC $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("LIBHELLO_SRC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"_9-4-set-target-properties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-4-set-target-properties"}},[s._v("#")]),s._v(" 9.4."),a("code",[s._v("SET_TARGET_PROPERTIES")])]),s._v(" "),a("p",[s._v("这条指令可以用来设置输出的名称，对于动态库，还可以用来指定动态库版本和 API 版本")]),s._v(" "),a("p",[s._v("同时构建静态和动态库")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LIBHELLO_SRC hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ADD_LIBRARY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello_static STATIC $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("LIBHELLO_SRC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//对hello_static的重名为hello")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SET_TARGET_PROPERTIES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello_static PROPERTIES  OUTPUT_NAME "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//cmake 在构建一个新的target 时，会尝试清理掉其他使用这个名字的库，因为，在构建 libhello.so 时， 就会清理掉 libhello.a")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SET_TARGET_PROPERTIES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello_static PROPERTIES CLEAN_DIRECT_OUTPUT "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ADD_LIBRARY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello SHARED $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("LIBHELLO_SRC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SET_TARGET_PROPERTIES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello PROPERTIES  OUTPUT_NAME "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("SET_TARGET_PROPERTIES")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello PROPERTIES CLEAN_DIRECT_OUTPUT "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h3",{attrs:{id:"_9-5-动态库的版本号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-5-动态库的版本号"}},[s._v("#")]),s._v(" 9.5.动态库的版本号")]),s._v(" "),a("p",[s._v("一般动态库都有一个版本号的关联")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[s._v("libhello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v("\nlibhello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("libhello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nlibhello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("libhello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("CMakeLists.txt 插入如下")]),s._v(" "),a("p",[a("code",[s._v("SET_TARGET_PROPERTIES(hello PROPERTIES VERSION 1.2 SOVERSION 1)")])]),s._v(" "),a("p",[s._v("VERSION 指代动态库版本，SOVERSION 指代 API 版本。")]),s._v(" "),a("h3",{attrs:{id:"_9-6-安装共享库和头文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-6-安装共享库和头文件"}},[s._v("#")]),s._v(" 9.6.安装共享库和头文件")]),s._v(" "),a("p",[s._v("本例中我们将 hello 的共享库安装到"),a("prefix",[s._v("/lib目录，")])],1),s._v(" "),a("p",[s._v("将 hello.h 安装到"),a("prefix",[s._v("/include/hello 目录")])],1),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//文件放到该目录下")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("INSTALL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("FILES hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("h DESTINATION include"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//二进制，静态库，动态库安装都用TARGETS")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//ARCHIVE 特指静态库，LIBRARY 特指动态库，RUNTIME 特指可执行目标二进制。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("INSTALL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TARGETS hello hello_static LIBRARY DESTINATION lib ARCHIVE DESTINATION lib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("注意：")]),s._v(" "),a("p",[s._v("安装的时候，指定一下路径，放到系统下")]),s._v(" "),a("p",[a("code",[s._v("cmake -DCMAKE_INSTALL_PREFIX=/usr ..")])]),s._v(" "),a("h3",{attrs:{id:"_9-7-使用外部共享库和头文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-7-使用外部共享库和头文件"}},[s._v("#")]),s._v(" 9.7.使用外部共享库和头文件")]),s._v(" "),a("p",[s._v("准备工作，新建一个目录来使用外部共享库和头文件")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@MiWiFi"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("R4CM"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("srv cmake3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# tree\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n├── build\n├── CMakeLists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n└── src\n    ├── CMakeLists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("txt\n    └── main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cpp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("main.cpp")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("<hello.h>")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("HelloFunc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"_9-8-解决-make后头文件找不到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-8-解决-make后头文件找不到的问题"}},[s._v("#")]),s._v(" 9.8.解决：make后头文件找不到的问题")]),s._v(" "),a("p",[s._v("PS：include <hello/hello.h>  这样include是可以，这么做的话，就没啥好讲的了")]),s._v(" "),a("p",[s._v("关键字：INCLUDE_DIRECTORIES    这条指令可以用来向工程添加多个特定的头文件搜索路径，路径之间用空格分割")]),s._v(" "),a("p",[s._v("在CMakeLists.txt中加入头文件搜索路径")]),s._v(" "),a("p",[s._v("INCLUDE_DIRECTORIES(/usr/include/hello)")]),s._v(" "),a("p",[s._v("感谢：")]),s._v(" "),a("p",[s._v("网友：zcc720的提醒")]),s._v(" "),a("h3",{attrs:{id:"_9-9-解决-找到引用的函数问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-9-解决-找到引用的函数问题"}},[s._v("#")]),s._v(" 9.9.解决：找到引用的函数问题")]),s._v(" "),a("p",[s._v("报错信息：undefined reference to `HelloFunc()'")]),s._v(" "),a("p",[s._v("关键字：LINK_DIRECTORIES     添加非标准的共享库搜索路径")]),s._v(" "),a("p",[s._v("指定第三方库所在路径，LINK_DIRECTORIES(/home/myproject/libs)")]),s._v(" "),a("p",[s._v("关键字：TARGET_LINK_LIBRARIES    添加需要链接的共享库")]),s._v(" "),a("p",[s._v("TARGET_LINK_LIBRARIES的时候，只需要给出动态链接库的名字就行了。")]),s._v(" "),a("p",[s._v("在CMakeLists.txt中插入链接共享库，主要要插在executable的后面")]),s._v(" "),a("p",[s._v("查看main的链接情况")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@MiWiFi"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("R4CM"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("srv bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# ldd main \n\tlinux"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("vdso"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x00007ffedfda4000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tlibhello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib64"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("libhello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("so")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x00007f41c0d8f000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tlibstdc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib64"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("libstdc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x00007f41c0874000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tlibm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib64"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("libm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x00007f41c0572000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tlibgcc_s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib64"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("libgcc_s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x00007f41c035c000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tlibc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib64"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("libc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x00007f41bff8e000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib64"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ld"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("x86"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64.")]),s._v("so"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x00007f41c0b7c000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("链接静态库")]),s._v(" "),a("p",[a("code",[s._v("TARGET_LINK_LIBRARIES(main libhello.a)")])]),s._v(" "),a("h3",{attrs:{id:"_9-10-特殊的环境变量-cmake-include-path-和-cmake-library-path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-10-特殊的环境变量-cmake-include-path-和-cmake-library-path"}},[s._v("#")]),s._v(" 9.10.特殊的环境变量 "),a("code",[s._v("CMAKE_INCLUDE_PATH")]),s._v(" 和 "),a("code",[s._v("CMAKE_LIBRARY_PATH")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("cmake_include_path\ncmake_library_path\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("注意：这两个是环境变量而不是 cmake 变量，可以在linux的bash中进行设置")]),s._v(" "),a("p",[s._v("我们上面例子中使用了绝对路径INCLUDE_DIRECTORIES(/usr/include/hello)来指明include路径的位置")]),s._v(" "),a("p",[s._v("我们还可以使用另外一种方式，使用环境变量export CMAKE_INCLUDE_PATH=/usr/include/hello")]),s._v(" "),a("p",[s._v("补充：生产debug版本的方法：\n"),a("code",[s._v("cmake .. -DCMAKE_BUILD_TYPE=debug")])]),s._v(" "),a("h2",{attrs:{id:"_10-环境变量清单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-环境变量清单"}},[s._v("#")]),s._v(" 10.环境变量清单")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("cmake_include_path CMAKE_INCLUDE_PATH\ncmake_library_path CMAKE_LIBRARY_PATH\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"_11-向-cmake-添加分析标志以使用-gprof"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_11-向-cmake-添加分析标志以使用-gprof"}},[s._v("#")]),s._v(" 11.向 CMake 添加分析标志以使用 gprof")]),s._v(" "),a("ul",[a("li",[s._v("gprof可以统计程序各个函数的运行时间与调用次数，还可以给出各个函数之间的调用关系")])]),s._v(" "),a("p",[s._v("这里的一系列事件应该如下工作：")]),s._v(" "),a("ol",[a("li",[s._v("使用 -pg 选项"),a("strong",[s._v("编译")]),s._v("代码")]),s._v(" "),a("li",[s._v("使用 -pg 选项"),a("strong",[s._v("链接")]),s._v("代码")]),s._v(" "),a("li",[s._v("运行程序")]),s._v(" "),a("li",[s._v("程序生成 gmon.out 文件")]),s._v(" "),a("li",[s._v("运行 gprof 程序")])]),s._v(" "),a("p",[s._v("要添加性能分析标志，你必须添加到 CMakeLists.txt：")]),s._v(" "),a("ul",[a("li",[s._v("CMAKE_CXX_FLAGS是C++编译需要的编译参数")]),s._v(" "),a("li",[s._v("CMAKE_C_FLAGS是C编译时的参数")])]),s._v(" "),a("p",[s._v("cmake使用gprof\n需要在CMakeLists.txt文件中添加如下脚本")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("SET"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_CXX_FLAGS "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${CMAKE_CXX_FLAGS}")]),s._v(' -pg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nSET"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_C_FLAGS "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${CMAKE_C_FLAGS}")]),s._v(' -pg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nSET"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_EXE_LINKER_FLAGS "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${CMAKE_EXE_LINKER_FLAGS}")]),s._v(' -pg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nSET"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_SHARED_LINKER_FLAGS "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${CMAKE_SHARED_LINKER_FLAGS}")]),s._v(' -pg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"_12-cmake-指定编译器为gcc-clang"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_12-cmake-指定编译器为gcc-clang"}},[s._v("#")]),s._v(" 12.CMake 指定编译器为gcc/clang")]),s._v(" "),a("ul",[a("li",[s._v("方法一")])]),s._v(" "),a("p",[s._v("使用gcc")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CC")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/gcc\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CXX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/g++\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("使用clang")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CC")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/clang++\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CXX")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/clang++\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("方法二")])]),s._v(" "),a("p",[s._v("在CMakeLists.txt中类似如下的修改即可")]),s._v(" "),a("p",[s._v("注意，"),a("strong",[s._v("一定要写在project指令之前")]),s._v("，否则无效。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("SET"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_C_COMPILER /usr/bin/gcc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nSET"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CMAKE_CXX_COMPILER /usr/bin/g++"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),a("ul",[a("li",[s._v("本文主要来源："),a("a",{attrs:{href:"https://www.bilibili.com/video/BV1vR4y1u77h?p=1",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.bilibili.com/video/BV1vR4y1u77h?p=1"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("https://www.bilibili.com/video/BV1vR4y1u77h/?p=2&spm_id_from=pageDriver&vd_source=ea20f1fccee6fd3f1af7d59cd3ae7575")])])])}),[],!1,null,null,null);a.default=e.exports}}]);