(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{365:function(t,s,a){"use strict";a.r(s);var n=a(14),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"cxx中this指针实验"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cxx中this指针实验"}},[t._v("#")]),t._v(" CXX中this指针实验")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#✅this指针详解"}},[t._v("✅this指针详解")])]),s("li",[s("a",{attrs:{href:"#_1-this指针的用处"}},[t._v("1.this指针的用处")])]),s("li",[s("a",{attrs:{href:"#_2-this指针的构造时间"}},[t._v("2.this指针的构造时间")])]),s("li",[s("a",{attrs:{href:"#_3-this指针只能在成员函数中使用。"}},[t._v("3.this指针只能在成员函数中使用。")])]),s("li",[s("a",{attrs:{href:"#_4-this指针存放在何处-堆、栈、全局变量-还是其他"}},[t._v("4.this指针存放在何处？堆、栈、全局变量，还是其他？")])]),s("li",[s("a",{attrs:{href:"#参考资料"}},[t._v("参考资料")])])])]),s("p"),t._v(" "),s("p",[t._v("[toc]")]),t._v(" "),s("h2",{attrs:{id:"✅this指针详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#✅this指针详解"}},[t._v("#")]),t._v(" ✅this指针详解")]),t._v(" "),s("p",[t._v("​\t1、在 C++ 中，每一个"),s("strong",[t._v("对象")]),t._v("都能通过 "),s("strong",[t._v("this")]),t._v(" 指针来访问自己的地址。")]),t._v(" "),s("p",[t._v("​\t2、"),s("strong",[t._v("this")]),t._v(" 指针是所有成员函数的隐含参数。因此，在成员函数内部，它可以用来指向调用对象。（当我们调用成员函数时，实际上是"),s("strong",[t._v("替某个对象")]),t._v("调用它。）")]),t._v(" "),s("p",[t._v("​\t3、友元函数没有 "),s("strong",[t._v("this")]),t._v(" 指针，因为友元不是类的成员。只有成员函数才有 "),s("strong",[t._v("this")]),t._v(" 指针。")]),t._v(" "),s("h2",{attrs:{id:"_1-this指针的用处"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-this指针的用处"}},[t._v("#")]),t._v(" 1.this指针的用处")]),t._v(" "),s("p",[t._v("​\t一个对象的"),s("strong",[t._v("this指针并不是对象本身的一部分")]),t._v("，不会影响sizeof(对象)的结果。")]),t._v(" "),s("p",[t._v("​\t"),s("strong",[t._v("this作用域是在类内部")]),t._v("，当在类的非静态成员函数中访问类的非静态成员的时候，编译器会自动将对象本身的地址作为一个隐含参数传递给函数。")]),t._v(" "),s("p",[t._v("​\t也就是说，即使你没有写上this指针，编译器在==编译的时候==也是加上this的，它作为非静态"),s("strong",[t._v("成员函数")]),t._v("的隐含形参，对各成员的访问均通过this进行。")]),t._v(" "),s("h2",{attrs:{id:"_2-this指针的构造时间"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-this指针的构造时间"}},[t._v("#")]),t._v(" 2.this指针的构造时间")]),t._v(" "),s("p",[t._v("​\tthis在成员函数的开始前构造，在成员函数的结束后清除。这个"),s("strong",[t._v("生命周期")]),t._v("同"),s("strong",[t._v("任何一个函数的参数")]),t._v("是一样的，没有任何区别")]),t._v(" "),s("p",[t._v("「这是编译器做的事情！！！」")]),t._v(" "),s("div",{staticClass:"language-cpp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[t._v("当调用一个类的成员函数时，编译器将类的指针作为函数的"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v("参数传递进去。如：\n  A a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\na"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("✅✅✅✅\n\n此处，编译器将会编译成：\n\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token double-colon punctuation"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" ✅✅✅学习这种转换方法「帮助理解虚函数」\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("​\t看起来和静态函数没差别，对吗？")]),t._v(" "),s("p",[t._v("​\t不过，区别还是有的。"),s("strong",[t._v("编译器通常会对this指针做一些优化")]),t._v("，因此，"),s("strong",[t._v("this指针的传递效率比较高")]),t._v("，如"),s("strong",[t._v("VC通常是通过ecx寄存器")]),t._v("传递this参数的。「编译器自行做优化」编译器开发工程师的事情。")]),t._v(" "),s("h2",{attrs:{id:"_3-this指针只能在成员函数中使用。"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-this指针只能在成员函数中使用。"}},[t._v("#")]),t._v(" 3.this指针只能在成员函数中使用。")]),t._v(" "),s("p",[s("strong",[t._v("全局函数、静态函数都不能使用this.")])]),t._v(" "),s("p",[t._v("实际上，成员函数默认第一个参数为T * const this。")]),t._v(" "),s("p",[t._v("如：")]),t._v(" "),s("div",{staticClass:"language-cpp line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-cpp"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v("\n\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("func")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("h2",{attrs:{id:"_4-this指针存放在何处-堆、栈、全局变量-还是其他"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-this指针存放在何处-堆、栈、全局变量-还是其他"}},[t._v("#")]),t._v(" 4.this指针存放在何处？堆、栈、全局变量，还是其他？")]),t._v(" "),s("p",[t._v("​\t1、this指针"),s("strong",[t._v("会因编译器不同而有不同的放置位置")]),t._v("。可能是栈，也可能是寄存器，甚至全局变量。")]),t._v(" "),s("p",[t._v("​\t2、在汇编级 别里面，一个值只会以3种形式出现：立即数、寄存器值和内存变量值。不是存放在寄存器就是存放在内存中，它们并不是和高级语言变量对应的。")]),t._v(" "),s("p",[t._v("​\t在《"),s("a",{attrs:{href:"http://c.biancheng.net/view/vip_2220.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("C++函数编译原理和成员函数的实现"),s("OutboundLink")],1),t._v("》一节中讲到，成员函数最终被"),s("strong",[t._v("编译成")]),t._v("与对象无关的普通函数，除了成员变量，会丢失所有信息，所以编译时要在成员函数中添加一个额外的参数，把当前对象的首地址传入，以此来关联成员函数和成员变量。这个额外的参数，实际上就是 this，它是"),s("strong",[t._v("成员函数")]),t._v("和"),s("strong",[t._v("成员变量")]),t._v("关联的桥梁。「这个“this指针”指向了"),s("strong",[t._v("成员函数作用的对象")]),t._v("，在成员函数执行的过程中，正是通过“Ihis指针”才能找到对象所在的地址，因而也就能找到对象的所有"),s("strong",[t._v("非静态成员变量")]),t._v("的地址」")]),t._v(" "),s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),s("ul",[s("li",[t._v("C++ "),s("a",{attrs:{href:"http://c.biancheng.net/view/2226.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("this指针详解"),s("OutboundLink")],1),t._v("（精辟）")]),t._v(" "),s("li",[t._v("C++ "),s("a",{attrs:{href:"http://c.biancheng.net/view/170.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("this指针"),s("OutboundLink")],1),t._v("（直戳本质）")]),t._v(" "),s("li",[t._v("菜鸟教程，"),s("a",{attrs:{href:"https://www.runoob.com/cplusplus/cpp-this-pointer.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("this指针"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.cnblogs.com/Allen-rg/p/11399201.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("C++ this指针"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);