<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mysql知识点总结 | whoway</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/images/photo.jpg">
    <link rel="manifest" href="/images/photo.jpg">
    <link rel="apple-touch-icon" href="/images/photo.jpg">
    <meta name="description" content="Personal Blog Website">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
    <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.e8e4f3a3.css" as="style"><link rel="preload" href="/assets/js/app.d6bf34d0.js" as="script"><link rel="preload" href="/assets/js/2.fd3114d8.js" as="script"><link rel="preload" href="/assets/js/129.d50b838b.js" as="script"><link rel="prefetch" href="/assets/js/10.48ffca33.js"><link rel="prefetch" href="/assets/js/100.c8a3c21c.js"><link rel="prefetch" href="/assets/js/101.5f219285.js"><link rel="prefetch" href="/assets/js/102.a900314e.js"><link rel="prefetch" href="/assets/js/103.b421602b.js"><link rel="prefetch" href="/assets/js/104.281189b0.js"><link rel="prefetch" href="/assets/js/105.3c594084.js"><link rel="prefetch" href="/assets/js/106.10a1f403.js"><link rel="prefetch" href="/assets/js/107.fc6abcdd.js"><link rel="prefetch" href="/assets/js/108.6f8fb9df.js"><link rel="prefetch" href="/assets/js/109.18826150.js"><link rel="prefetch" href="/assets/js/11.7ede0041.js"><link rel="prefetch" href="/assets/js/110.57380901.js"><link rel="prefetch" href="/assets/js/111.23d425bb.js"><link rel="prefetch" href="/assets/js/112.863080e1.js"><link rel="prefetch" href="/assets/js/113.f4898658.js"><link rel="prefetch" href="/assets/js/114.845f2509.js"><link rel="prefetch" href="/assets/js/115.0f30ae2d.js"><link rel="prefetch" href="/assets/js/116.7125181f.js"><link rel="prefetch" href="/assets/js/117.7e336042.js"><link rel="prefetch" href="/assets/js/118.89c8d0ba.js"><link rel="prefetch" href="/assets/js/119.859ded75.js"><link rel="prefetch" href="/assets/js/12.d1d774cd.js"><link rel="prefetch" href="/assets/js/120.8eca280a.js"><link rel="prefetch" href="/assets/js/121.4e23e8a6.js"><link rel="prefetch" href="/assets/js/122.05637502.js"><link rel="prefetch" href="/assets/js/123.81ff09dd.js"><link rel="prefetch" href="/assets/js/124.4261ced1.js"><link rel="prefetch" href="/assets/js/125.21ddb1cc.js"><link rel="prefetch" href="/assets/js/126.b34db922.js"><link rel="prefetch" href="/assets/js/127.02e46eda.js"><link rel="prefetch" href="/assets/js/128.70457cb7.js"><link rel="prefetch" href="/assets/js/13.85fbca07.js"><link rel="prefetch" href="/assets/js/130.b48ab675.js"><link rel="prefetch" href="/assets/js/131.1cc940f7.js"><link rel="prefetch" href="/assets/js/132.1d0937fc.js"><link rel="prefetch" href="/assets/js/133.7551c0b1.js"><link rel="prefetch" href="/assets/js/134.1d7adc02.js"><link rel="prefetch" href="/assets/js/135.ff006112.js"><link rel="prefetch" href="/assets/js/136.49f7247f.js"><link rel="prefetch" href="/assets/js/137.aed7248a.js"><link rel="prefetch" href="/assets/js/138.ff3f565c.js"><link rel="prefetch" href="/assets/js/139.3282c90d.js"><link rel="prefetch" href="/assets/js/14.622c3b5a.js"><link rel="prefetch" href="/assets/js/140.a647fca3.js"><link rel="prefetch" href="/assets/js/141.25632076.js"><link rel="prefetch" href="/assets/js/142.56a09510.js"><link rel="prefetch" href="/assets/js/143.59a7f8b4.js"><link rel="prefetch" href="/assets/js/144.2985b6f8.js"><link rel="prefetch" href="/assets/js/145.2d51e463.js"><link rel="prefetch" href="/assets/js/146.5825f78c.js"><link rel="prefetch" href="/assets/js/147.65ed41fe.js"><link rel="prefetch" href="/assets/js/148.0041fdba.js"><link rel="prefetch" href="/assets/js/149.016eedb1.js"><link rel="prefetch" href="/assets/js/15.c5d54dc7.js"><link rel="prefetch" href="/assets/js/150.f4a81955.js"><link rel="prefetch" href="/assets/js/151.b747fb05.js"><link rel="prefetch" href="/assets/js/152.1b0388ee.js"><link rel="prefetch" href="/assets/js/153.bfd1d955.js"><link rel="prefetch" href="/assets/js/154.be2ae7e7.js"><link rel="prefetch" href="/assets/js/155.4be2af59.js"><link rel="prefetch" href="/assets/js/156.4f88e230.js"><link rel="prefetch" href="/assets/js/157.b50f47ec.js"><link rel="prefetch" href="/assets/js/158.43e217be.js"><link rel="prefetch" href="/assets/js/159.33623c2c.js"><link rel="prefetch" href="/assets/js/16.c5fba6b9.js"><link rel="prefetch" href="/assets/js/160.99dbbae5.js"><link rel="prefetch" href="/assets/js/161.f0325497.js"><link rel="prefetch" href="/assets/js/162.3eb5d361.js"><link rel="prefetch" href="/assets/js/163.59a3e3ca.js"><link rel="prefetch" href="/assets/js/164.1ed97dcf.js"><link rel="prefetch" href="/assets/js/165.87bf3a15.js"><link rel="prefetch" href="/assets/js/166.df2e730c.js"><link rel="prefetch" href="/assets/js/167.47fc520a.js"><link rel="prefetch" href="/assets/js/168.6fad5ba1.js"><link rel="prefetch" href="/assets/js/169.cbd8d980.js"><link rel="prefetch" href="/assets/js/17.4efd5fd7.js"><link rel="prefetch" href="/assets/js/170.acc408e2.js"><link rel="prefetch" href="/assets/js/171.ff2330db.js"><link rel="prefetch" href="/assets/js/172.7a24df40.js"><link rel="prefetch" href="/assets/js/173.f1c90f66.js"><link rel="prefetch" href="/assets/js/174.f51f5f18.js"><link rel="prefetch" href="/assets/js/175.c90b50eb.js"><link rel="prefetch" href="/assets/js/176.3013c858.js"><link rel="prefetch" href="/assets/js/177.b85c1327.js"><link rel="prefetch" href="/assets/js/178.6bd48966.js"><link rel="prefetch" href="/assets/js/179.f6062460.js"><link rel="prefetch" href="/assets/js/18.61f36b5f.js"><link rel="prefetch" href="/assets/js/180.63b739d2.js"><link rel="prefetch" href="/assets/js/181.346eb60a.js"><link rel="prefetch" href="/assets/js/182.625f96ce.js"><link rel="prefetch" href="/assets/js/183.9c978ca8.js"><link rel="prefetch" href="/assets/js/184.c2cb0b69.js"><link rel="prefetch" href="/assets/js/185.8afbb29f.js"><link rel="prefetch" href="/assets/js/186.e1291c95.js"><link rel="prefetch" href="/assets/js/187.046ee658.js"><link rel="prefetch" href="/assets/js/188.f22d0667.js"><link rel="prefetch" href="/assets/js/189.be1bc48e.js"><link rel="prefetch" href="/assets/js/19.ee2c88d0.js"><link rel="prefetch" href="/assets/js/190.8d9b0921.js"><link rel="prefetch" href="/assets/js/191.9e19b909.js"><link rel="prefetch" href="/assets/js/192.9653b23c.js"><link rel="prefetch" href="/assets/js/193.ed4f4c99.js"><link rel="prefetch" href="/assets/js/194.909aa5f2.js"><link rel="prefetch" href="/assets/js/195.a8c80d13.js"><link rel="prefetch" href="/assets/js/196.60f84592.js"><link rel="prefetch" href="/assets/js/197.56cd280f.js"><link rel="prefetch" href="/assets/js/198.aebcdb1f.js"><link rel="prefetch" href="/assets/js/199.3a77c50d.js"><link rel="prefetch" href="/assets/js/20.e9035baf.js"><link rel="prefetch" href="/assets/js/200.edb390fe.js"><link rel="prefetch" href="/assets/js/201.f6f0cde1.js"><link rel="prefetch" href="/assets/js/202.5dc3c301.js"><link rel="prefetch" href="/assets/js/203.c4945f72.js"><link rel="prefetch" href="/assets/js/204.ee11e309.js"><link rel="prefetch" href="/assets/js/205.42b3980e.js"><link rel="prefetch" href="/assets/js/206.cb416265.js"><link rel="prefetch" href="/assets/js/207.7b55f4db.js"><link rel="prefetch" href="/assets/js/208.f4946d4e.js"><link rel="prefetch" href="/assets/js/209.88ab8daf.js"><link rel="prefetch" href="/assets/js/21.cbe7ba17.js"><link rel="prefetch" href="/assets/js/210.42c973e2.js"><link rel="prefetch" href="/assets/js/211.d2a954cf.js"><link rel="prefetch" href="/assets/js/212.9d7d4285.js"><link rel="prefetch" href="/assets/js/213.a7cab2ec.js"><link rel="prefetch" href="/assets/js/214.cb4ea9ca.js"><link rel="prefetch" href="/assets/js/215.5d2647af.js"><link rel="prefetch" href="/assets/js/216.2030160d.js"><link rel="prefetch" href="/assets/js/217.c2339b7c.js"><link rel="prefetch" href="/assets/js/218.7e78bdde.js"><link rel="prefetch" href="/assets/js/219.aca99dbc.js"><link rel="prefetch" href="/assets/js/22.e053cb7c.js"><link rel="prefetch" href="/assets/js/220.796adf48.js"><link rel="prefetch" href="/assets/js/221.53e2095a.js"><link rel="prefetch" href="/assets/js/222.58733ea4.js"><link rel="prefetch" href="/assets/js/223.daea1446.js"><link rel="prefetch" href="/assets/js/224.dfc2e642.js"><link rel="prefetch" href="/assets/js/225.cb6b4d03.js"><link rel="prefetch" href="/assets/js/226.28039f09.js"><link rel="prefetch" href="/assets/js/227.c71c9ad3.js"><link rel="prefetch" href="/assets/js/228.2e822224.js"><link rel="prefetch" href="/assets/js/229.4181e449.js"><link rel="prefetch" href="/assets/js/23.2e12610b.js"><link rel="prefetch" href="/assets/js/230.29b8f294.js"><link rel="prefetch" href="/assets/js/24.c73970bd.js"><link rel="prefetch" href="/assets/js/25.d6d39b36.js"><link rel="prefetch" href="/assets/js/26.444c765e.js"><link rel="prefetch" href="/assets/js/27.e32aad29.js"><link rel="prefetch" href="/assets/js/28.efde1374.js"><link rel="prefetch" href="/assets/js/29.ea9b9a7e.js"><link rel="prefetch" href="/assets/js/3.89b3937d.js"><link rel="prefetch" href="/assets/js/30.f2ab7867.js"><link rel="prefetch" href="/assets/js/31.c861762c.js"><link rel="prefetch" href="/assets/js/32.0421d761.js"><link rel="prefetch" href="/assets/js/33.c4e4c6bf.js"><link rel="prefetch" href="/assets/js/34.2c538580.js"><link rel="prefetch" href="/assets/js/35.a9593ee0.js"><link rel="prefetch" href="/assets/js/36.427c2f85.js"><link rel="prefetch" href="/assets/js/37.38493a96.js"><link rel="prefetch" href="/assets/js/38.549815e1.js"><link rel="prefetch" href="/assets/js/39.bf28e8d9.js"><link rel="prefetch" href="/assets/js/4.13cd3e8b.js"><link rel="prefetch" href="/assets/js/40.1212795b.js"><link rel="prefetch" href="/assets/js/41.88e53f69.js"><link rel="prefetch" href="/assets/js/42.b99d9416.js"><link rel="prefetch" href="/assets/js/43.6bf7be94.js"><link rel="prefetch" href="/assets/js/44.a284dbbb.js"><link rel="prefetch" href="/assets/js/45.f2cd4c8e.js"><link rel="prefetch" href="/assets/js/46.eab339f2.js"><link rel="prefetch" href="/assets/js/47.ba051c37.js"><link rel="prefetch" href="/assets/js/48.e6030994.js"><link rel="prefetch" href="/assets/js/49.db648e5c.js"><link rel="prefetch" href="/assets/js/5.4832b9d7.js"><link rel="prefetch" href="/assets/js/50.26c56630.js"><link rel="prefetch" href="/assets/js/51.f9d2b3db.js"><link rel="prefetch" href="/assets/js/52.0eda579f.js"><link rel="prefetch" href="/assets/js/53.45a848c0.js"><link rel="prefetch" href="/assets/js/54.c16c540f.js"><link rel="prefetch" href="/assets/js/55.decc47a1.js"><link rel="prefetch" href="/assets/js/56.009be23f.js"><link rel="prefetch" href="/assets/js/57.743c9324.js"><link rel="prefetch" href="/assets/js/58.ed3fa751.js"><link rel="prefetch" href="/assets/js/59.0df0aee1.js"><link rel="prefetch" href="/assets/js/6.b23f8b71.js"><link rel="prefetch" href="/assets/js/60.be11e6ce.js"><link rel="prefetch" href="/assets/js/61.ac0142a0.js"><link rel="prefetch" href="/assets/js/62.b2d11e26.js"><link rel="prefetch" href="/assets/js/63.b552b2b0.js"><link rel="prefetch" href="/assets/js/64.2ed5f059.js"><link rel="prefetch" href="/assets/js/65.5dac4d59.js"><link rel="prefetch" href="/assets/js/66.431a6f54.js"><link rel="prefetch" href="/assets/js/67.524ae338.js"><link rel="prefetch" href="/assets/js/68.cf5fac15.js"><link rel="prefetch" href="/assets/js/69.78b26446.js"><link rel="prefetch" href="/assets/js/7.697ae5ac.js"><link rel="prefetch" href="/assets/js/70.4750f89f.js"><link rel="prefetch" href="/assets/js/71.ab520cfd.js"><link rel="prefetch" href="/assets/js/72.a428dc91.js"><link rel="prefetch" href="/assets/js/73.8f5b063d.js"><link rel="prefetch" href="/assets/js/74.e20caebd.js"><link rel="prefetch" href="/assets/js/75.6edb0b27.js"><link rel="prefetch" href="/assets/js/76.b3239458.js"><link rel="prefetch" href="/assets/js/77.852379fa.js"><link rel="prefetch" href="/assets/js/78.a2a41dd6.js"><link rel="prefetch" href="/assets/js/79.b6f7333d.js"><link rel="prefetch" href="/assets/js/8.079f0d9b.js"><link rel="prefetch" href="/assets/js/80.683b1e49.js"><link rel="prefetch" href="/assets/js/81.177baad9.js"><link rel="prefetch" href="/assets/js/82.94d1daa6.js"><link rel="prefetch" href="/assets/js/83.39dda9f3.js"><link rel="prefetch" href="/assets/js/84.74460b32.js"><link rel="prefetch" href="/assets/js/85.fb624dce.js"><link rel="prefetch" href="/assets/js/86.efa5d23e.js"><link rel="prefetch" href="/assets/js/87.c33efbee.js"><link rel="prefetch" href="/assets/js/88.11ee3b5b.js"><link rel="prefetch" href="/assets/js/89.5436dfd8.js"><link rel="prefetch" href="/assets/js/9.af54c745.js"><link rel="prefetch" href="/assets/js/90.4c4610fd.js"><link rel="prefetch" href="/assets/js/91.5c7146a8.js"><link rel="prefetch" href="/assets/js/92.d8aad443.js"><link rel="prefetch" href="/assets/js/93.4cc59dc5.js"><link rel="prefetch" href="/assets/js/94.7fe1cc0c.js"><link rel="prefetch" href="/assets/js/95.05a02d29.js"><link rel="prefetch" href="/assets/js/96.9d23e375.js"><link rel="prefetch" href="/assets/js/97.74eb9b1f.js"><link rel="prefetch" href="/assets/js/98.8a41e507.js"><link rel="prefetch" href="/assets/js/99.3fee399a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8e4f3a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">whoway</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🎓Coding" class="dropdown-title"><span class="title">🎓Coding</span> <span class="arrow down"></span></button> <button type="button" aria-label="🎓Coding" class="mobile-dropdown-title"><span class="title">🎓Coding</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/00.Coding/TheBeautyOfProgramming/" class="nav-link">
  🔖编程之美题解
</a></li><li class="dropdown-item"><!----> <a href="/00.Coding/CodeWarehouse/" class="nav-link">
  🔖代码意识流
</a></li><li class="dropdown-item"><!----> <a href="/00.Coding/" class="nav-link">
  🔖面试题题解
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🚀语言" class="dropdown-title"><span class="title">🚀语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="🚀语言" class="mobile-dropdown-title"><span class="title">🚀语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/01.Language/Overview/" class="nav-link">
  🔖概述
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/C/" class="nav-link">
  ⭐️C
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Cpp/" class="nav-link">
  🚀C++
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Java/" class="nav-link">
  ☕️Java
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Python/" class="nav-link">
  🧩Python3
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Fortran/" class="nav-link">
  🎲Fortran
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/JavaScript/" class="nav-link">
  🎨JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="/02.Hardware/" class="nav-link">
  ✔️硬件基础
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⭐️软件基础" class="dropdown-title"><span class="title">⭐️软件基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="⭐️软件基础" class="mobile-dropdown-title"><span class="title">⭐️软件基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/03.Software/01.DataStructureAndAlgorithm/" class="nav-link">
  🐾数据结构和算法
</a></li><li class="dropdown-item"><!----> <a href="/03.Software/02.server/" class="nav-link">
  🎨server
</a></li><li class="dropdown-item"><!----> <a href="/03.Software/03.Database/" class="nav-link router-link-active">
  🔖数据库
</a></li><li class="dropdown-item"><!----> <a href="/03.Software/04.SE/" class="nav-link">
  ✅软件工程
</a></li></ul></div></div><div class="nav-item"><a href="/04.PerformanceOpt/" class="nav-link">
  🔥性能调优
</a></div><div class="nav-item"><a href="/05.Engineer/" class="nav-link">
  🔖学术/工程
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⚙️工具" class="dropdown-title"><span class="title">⚙️工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="⚙️工具" class="mobile-dropdown-title"><span class="title">⚙️工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/06.Tools/01.employment/" class="nav-link">
  🔖求职
</a></li><li class="dropdown-item"><!----> <a href="/06.Tools/02.efficiency/" class="nav-link">
  🚀效能
</a></li><li class="dropdown-item"><!----> <a href="/06.Tools/03.windows/" class="nav-link">
  ⚙️Windows
</a></li><li class="dropdown-item"><!----> <a href="/06.Tools/04.design/" class="nav-link">
  🧩设计
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/whoway" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🎓Coding" class="dropdown-title"><span class="title">🎓Coding</span> <span class="arrow down"></span></button> <button type="button" aria-label="🎓Coding" class="mobile-dropdown-title"><span class="title">🎓Coding</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/00.Coding/TheBeautyOfProgramming/" class="nav-link">
  🔖编程之美题解
</a></li><li class="dropdown-item"><!----> <a href="/00.Coding/CodeWarehouse/" class="nav-link">
  🔖代码意识流
</a></li><li class="dropdown-item"><!----> <a href="/00.Coding/" class="nav-link">
  🔖面试题题解
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🚀语言" class="dropdown-title"><span class="title">🚀语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="🚀语言" class="mobile-dropdown-title"><span class="title">🚀语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/01.Language/Overview/" class="nav-link">
  🔖概述
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/C/" class="nav-link">
  ⭐️C
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Cpp/" class="nav-link">
  🚀C++
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Java/" class="nav-link">
  ☕️Java
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Python/" class="nav-link">
  🧩Python3
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Fortran/" class="nav-link">
  🎲Fortran
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/JavaScript/" class="nav-link">
  🎨JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="/02.Hardware/" class="nav-link">
  ✔️硬件基础
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⭐️软件基础" class="dropdown-title"><span class="title">⭐️软件基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="⭐️软件基础" class="mobile-dropdown-title"><span class="title">⭐️软件基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/03.Software/01.DataStructureAndAlgorithm/" class="nav-link">
  🐾数据结构和算法
</a></li><li class="dropdown-item"><!----> <a href="/03.Software/02.server/" class="nav-link">
  🎨server
</a></li><li class="dropdown-item"><!----> <a href="/03.Software/03.Database/" class="nav-link router-link-active">
  🔖数据库
</a></li><li class="dropdown-item"><!----> <a href="/03.Software/04.SE/" class="nav-link">
  ✅软件工程
</a></li></ul></div></div><div class="nav-item"><a href="/04.PerformanceOpt/" class="nav-link">
  🔥性能调优
</a></div><div class="nav-item"><a href="/05.Engineer/" class="nav-link">
  🔖学术/工程
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⚙️工具" class="dropdown-title"><span class="title">⚙️工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="⚙️工具" class="mobile-dropdown-title"><span class="title">⚙️工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/06.Tools/01.employment/" class="nav-link">
  🔖求职
</a></li><li class="dropdown-item"><!----> <a href="/06.Tools/02.efficiency/" class="nav-link">
  🚀效能
</a></li><li class="dropdown-item"><!----> <a href="/06.Tools/03.windows/" class="nav-link">
  ⚙️Windows
</a></li><li class="dropdown-item"><!----> <a href="/06.Tools/04.design/" class="nav-link">
  🧩设计
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/whoway" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Mysql知识点总结</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#目录" class="sidebar-link">目录</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#学习方法论" class="sidebar-link">学习方法论</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#面试题" class="sidebar-link">面试题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#_1-mysql的聚集索引和非聚集索引" class="sidebar-link">1.MySQL的聚集索引和非聚集索引</a></li><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#实现事务必须要遵守-4-个特性" class="sidebar-link">实现事务必须要遵守 4 个特性？</a></li><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#进阶-innodb-引擎通过什么技术来保证事务的这四个特性的呢" class="sidebar-link">进阶-InnoDB 引擎通过什么技术来保证事务的这四个特性的呢？</a></li><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#_2-并行事务会引发哪3个问题-详细介绍一下什么是脏读、不可重复读、幻读" class="sidebar-link">2.并行事务会引发哪3个问题？详细介绍一下什么是脏读、不可重复读、幻读</a></li><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#_3-请你说一说mysql的四种隔离状态-隔离级别" class="sidebar-link">3.请你说一说mysql的四种隔离状态（隔离级别）</a></li><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#_4进阶问题-这四种隔离级别具体是如何实现的呢" class="sidebar-link">4进阶问题-这四种隔离级别具体是如何实现的呢？</a></li><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#_4-2-请你介绍一下mysql的mvcc机制" class="sidebar-link">4.2.请你介绍一下mysql的MVCC机制</a></li><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#_4-3-请问sql优化方法有哪些" class="sidebar-link">4.3.请问SQL优化方法有哪些</a></li><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#_4-4-说一下mysql引擎的概念和分类" class="sidebar-link">4.4.说一下MySQL引擎的概念和分类</a></li><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#_4-5-说一下最常用的2个mysql引擎innodb和mylsam的对比" class="sidebar-link">4.5.说一下最常用的2个MySQL引擎InnoDB和Mylsam的对比</a></li><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#最左匹配原则的原理" class="sidebar-link">最左匹配原则的原理</a></li></ul></li><li><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#面试代码题" class="sidebar-link">面试代码题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#_1-查询排名前10的数据" class="sidebar-link">1.查询排名前10的数据</a></li><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#_2-mysql查询第1到2这2条语句" class="sidebar-link">2.mysql查询第1到2这2条语句</a></li><li class="sidebar-sub-header"><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#_3-联表查询" class="sidebar-link">3.联表查询</a></li></ul></li><li><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#附录-搭建mysql学习环境" class="sidebar-link">附录-搭建mysql学习环境</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/03.Database/mysql/1.Mysql%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html#参看资料" class="sidebar-link">参看资料</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mysql知识点总结"><a href="#mysql知识点总结" class="header-anchor">#</a> Mysql知识点总结</h1> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&lt;</span>font <span class="token assign-left variable">style</span><span class="token operator">=</span><span class="token string">&quot;background:yellow&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>font <span class="token assign-left variable">style</span><span class="token operator">=</span><span class="token string">&quot;background: MediumSpringGreen&quot;</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="目录"><a href="#目录" class="header-anchor">#</a> 目录</h2> <p>[TOC]</p> <p></p><div class="table-of-contents"><ul><li><a href="#目录">目录</a></li><li><a href="#学习方法论">学习方法论</a></li><li><a href="#面试题">面试题</a><ul><li><a href="#_1-mysql的聚集索引和非聚集索引">1.MySQL的聚集索引和非聚集索引</a></li><li><a href="#实现事务必须要遵守-4-个特性">实现事务必须要遵守 4 个特性？</a></li><li><a href="#进阶-innodb-引擎通过什么技术来保证事务的这四个特性的呢">进阶-InnoDB 引擎通过什么技术来保证事务的这四个特性的呢？</a></li><li><a href="#_2-并行事务会引发哪3个问题-详细介绍一下什么是脏读、不可重复读、幻读">2.并行事务会引发哪3个问题？详细介绍一下什么是脏读、不可重复读、幻读</a></li><li><a href="#_3-请你说一说mysql的四种隔离状态-隔离级别">3.请你说一说mysql的四种隔离状态（隔离级别）</a></li><li><a href="#_4进阶问题-这四种隔离级别具体是如何实现的呢">4进阶问题-这四种隔离级别具体是如何实现的呢？</a></li><li><a href="#_4-2-请你介绍一下mysql的mvcc机制">4.2.请你介绍一下mysql的MVCC机制</a></li><li><a href="#_4-3-请问sql优化方法有哪些">4.3.请问SQL优化方法有哪些</a></li><li><a href="#_4-4-说一下mysql引擎的概念和分类">4.4.说一下MySQL引擎的概念和分类</a></li><li><a href="#_4-5-说一下最常用的2个mysql引擎innodb和mylsam的对比">4.5.说一下最常用的2个MySQL引擎InnoDB和Mylsam的对比</a></li><li><a href="#最左匹配原则的原理">最左匹配原则的原理</a></li></ul></li><li><a href="#面试代码题">面试代码题</a><ul><li><a href="#_1-查询排名前10的数据">1.查询排名前10的数据</a></li><li><a href="#_2-mysql查询第1到2这2条语句">2.mysql查询第1到2这2条语句</a></li><li><a href="#_3-联表查询">3.联表查询</a></li></ul></li><li><a href="#附录-搭建mysql学习环境">附录-搭建mysql学习环境</a></li><li><a href="#参看资料">参看资料</a></li></ul></div><p></p> <h2 id="学习方法论"><a href="#学习方法论" class="header-anchor">#</a> 学习方法论</h2> <p>分清楚概念中『逻辑上的』和『实现层面上的』</p> <p>将数据结构和算法中的『逻辑结构』和『物理结构』的概念，转移到『数据库』的学习</p> <ul><li>如上：
<ul><li><strong>逻辑</strong>上有：隔离级别</li> <li><strong>物理实现</strong>上有：MVCC啥的</li></ul></li> <li>优点：<font style="background:yellow;">将各种术语概念连接在一起，以后就能少被网上层次不齐的资料概念带偏</font></li></ul> <h2 id="面试题"><a href="#面试题" class="header-anchor">#</a> 面试题</h2> <h3 id="_1-mysql的聚集索引和非聚集索引"><a href="#_1-mysql的聚集索引和非聚集索引" class="header-anchor">#</a> 1.MySQL的聚集索引和非聚集索引</h3> <p>聚集索引和非聚集索引的根本区别是表记录的排列顺序和与索引的排列顺序是否一致。</p> <p>1、聚集索引</p> <p>​	聚集索引表记录的排列顺序和索引的排列顺序一致（以InnoDB聚集索引的主键索引来说，叶子节点中存储的就是行数据，行数据在物理储器中的真实地址就是按照主键索引树形成的顺序进行排列的），所以<strong>查询效率快</strong>，只要找到第一个索引值记录，其余就连续性的记录在物理也一样连续存放。聚集索引对应的缺点就是<strong>修改慢</strong>，因为为了保证表中记录的物理和索引顺序一致，在记录插入的时候，会对数据页重新排序（因为在真实物理存储器的存储顺序只能有一种，而插入新数据必然会导致主键索引树的变化，主键索引树的顺序发生了改变，叶子节点中存储的行数据也要随之进行改变，就会发生大量的数据移动操作，所以效率会慢）。<strong>因为在物理内存中的顺序只能有一种，所以聚集索引在一个表中只能有一个</strong>。</p> <p>2、非聚集索引</p> <p>​	非聚集索引制定了表中记录的逻辑顺序，但是记录的物理和索引不一定一致（在逻辑上数据是按顺序排存放的，但是物理上在真实的存储器中是散列存放的），两种索引都采用B+树结构，**非聚集索引的叶子层并不和实际数据页相重叠，而采用叶子层包含一个指向表中的记录在数据页中的指针方式。**非聚集索引层次多，不会造成数据重排。所以如果表的读操作远远多于写操作，那么就可以使用非聚集索引。</p> <h3 id="实现事务必须要遵守-4-个特性"><a href="#实现事务必须要遵守-4-个特性" class="header-anchor">#</a> 实现事务必须要遵守 4 个特性？</h3> <p><strong>原子性（Atomicity）</strong>：一个事务中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节，而且事务在执行过程中发生错误，会被回滚到事务开始前的状态，就像这个事务从来没有执行过一样，</p> <p><strong>持久性（Durability）</strong>：事务处理结束后，对数据的修改就是永久的，即便系<strong>统故障也不会丢失</strong>「因为有<font style="background:yellow;">redo日志</font>」</p> <p><strong>隔离性（Isolation）</strong>：数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致，因为多个事务同时使用相同的数据时，不会相互干扰，每个事务都有一个完整的数据空间，对其他并发事务是隔离的。</p> <p><strong>一致性（Consistency）</strong>：是指事务操作前和操作后，数据满足<font style="background:yellow;">「完整性约束」</font>，数据库保持一致性状态。</p> <p>​	我的理解：事务操作前到后的<strong>状态</strong>，通过逆向操作，是<font style="background:yellow;">可逆的</font>！</p> <h3 id="进阶-innodb-引擎通过什么技术来保证事务的这四个特性的呢"><a href="#进阶-innodb-引擎通过什么技术来保证事务的这四个特性的呢" class="header-anchor">#</a> 进阶-InnoDB 引擎通过什么技术来保证事务的这四个特性的呢？</h3> <ul><li><strong>持久性</strong>是通过 redo log （重做日志）来保证的；</li> <li><strong>原子性</strong>是通过 <strong>undo log（回滚日志）</strong> 来保证的；</li> <li><strong>隔离性</strong>是通过 MVCC（多版本并发控制） 或锁机制来保证的；（我觉得还有啥也不管的，马不停蹄的读）</li> <li><font style="background:yellow;">一致性</font>则是通过持久性+原子性+隔离性来保证；</li></ul> <h3 id="_2-并行事务会引发哪3个问题-详细介绍一下什么是脏读、不可重复读、幻读"><a href="#_2-并行事务会引发哪3个问题-详细介绍一下什么是脏读、不可重复读、幻读" class="header-anchor">#</a> 2.并行事务会引发哪3个问题？详细介绍一下什么是脏读、不可重复读、幻读</h3> <p>3种问题，因为MySQL 服务端是允许多个客户端连接的，这意味着 MySQL 会出现<strong>同时处理多个事务</strong>的情况。</p> <h4 id="问题严重程度从1-3变麻烦"><a href="#问题严重程度从1-3变麻烦" class="header-anchor">#</a> 问题严重程度从1-&gt;3变麻烦！</h4> <p>​	我们提到，当多个事务并发执行时可能会遇到「脏读、不可重复读、幻读」的现象，这些现象会对事务的一致性产生不同程序的影响。</p> <ul><li>脏读：读到<strong>其他事务未提交</strong>的数据；</li> <li>不可重复读：前后<strong>读取</strong>的数据不一致；</li> <li>幻读：前后<strong>统计</strong>的记录数量不一致。</li></ul> <p>严重性排序：<font style="background:yellow;">幻读&gt;不可重复读&gt;脏读</font></p> <h4 id="_1-脏读"><a href="#_1-脏读" class="header-anchor">#</a> 1.脏读</h4> <p>2个事务操作，A事务读写数后修改数据的时候，B事物进行了读取，然后A事物后续又回滚了，那么B就是读取到了脏数据！</p> <p><strong>如果一个B事务「读到」了另一个A「<font style="background:yellow;">未提交事务</font>修改过的数据(因为事务 A 是还没提交事务的，也就是它随时可能发生回滚操作，<strong>如果在上面这种情况事务 A 发生了回滚，那么事务 B 刚才得到的数据就是过期的数据，这种现象就被称为脏读。</strong>)」，就意味着发生了「脏读」现象。</strong></p> <h4 id="_2-不可重复读"><a href="#_2-不可重复读" class="header-anchor">#</a> 2.不可重复读</h4> <p><font style="background:yellow;">select操作（查询操作）</font>，在1个事务中进行前后2次查询，发现查询结果不一致！</p> <h4 id="_3-幻读"><a href="#_3-幻读" class="header-anchor">#</a> 3.幻读</h4> <p><font style="background:yellow;">count操作（统计操作）</font>，在1个事务中进行前后2次统计，发现结果不一致</p> <p><strong>在一个事务内多次查询（统计）某个符合查询条件的「记录数量」，如果出现前后两次查询到的记录数量不一样的情况，就意味着发生了「幻读」现象。</strong></p> <h3 id="_3-请你说一说mysql的四种隔离状态-隔离级别"><a href="#_3-请你说一说mysql的四种隔离状态-隔离级别" class="header-anchor">#</a> 3.请你说一说mysql的四种隔离状态（隔离级别）</h3> <p>​	我们提到，当多个事务并发执行时可能会遇到「脏读、不可重复读、幻读」的现象，这些现象会对事务的一致性产生不同程序的影响。</p> <p>​	SQL 标准提出了四种隔离级别<strong>来规避这些现象</strong>，<strong>隔离级别越高，性能效率就越低</strong>，这四个隔离级别如下：</p> <p>✅表示解决了！</p> <h4 id="_4大类-隔离级别从1-4变高"><a href="#_4大类-隔离级别从1-4变高" class="header-anchor">#</a> 4大类：隔离级别从1-&gt;4变高</h4> <h4 id="_1-读未提交-read-uncommitted"><a href="#_1-读未提交-read-uncommitted" class="header-anchor">#</a> 1.读未提交（read-uncommitted）</h4> <p>指<strong>一个事务还没提交时</strong>，它做的<strong>变更</strong>就能被其他事务看到（这啥也没干，放任不管！）</p> <p>存在的问题：</p> <p>🚫脏读（定义就是说明这个没解决）</p> <p>🚫不可重复读（显然，推理容易知道）</p> <p>🚫幻读（显然，进一步推理也解决不了）</p> <h4 id="_2-读提交-read-committed-名字解决了-读非提交-即脏读"><a href="#_2-读提交-read-committed-名字解决了-读非提交-即脏读" class="header-anchor">#</a> 2.<strong>读提交（read committed）</strong>-<font style="background:yellow;">名字解决了：读非提交（即脏读）</font></h4> <p>指<strong>一个事务提交之后</strong>，它做的变更<strong>才能</strong>被其他事务看到；（就是比第1级别，约束了一下，必须事务提交了才能被看到）</p> <p>解决的问题：</p> <p>✅脏读</p> <p>存在的问题：</p> <p>🚫不可重复读（显然，推理容易知道）</p> <p>🚫幻读（显然，进一步推理也解决不了）</p> <h4 id="_3-可重复读-repeatable-read-名字解决了-不可重复读"><a href="#_3-可重复读-repeatable-read-名字解决了-不可重复读" class="header-anchor">#</a> 3.<strong>可重复读（repeatable read）</strong><font style="background:yellow;">名字解决了：不可重复读</font></h4> <p>指一个事务<strong>执行过程</strong>中看到的数据，一直跟这个事务<strong>启动时</strong>看到的数据是一致的，<strong><font style="background:yellow;">MySQL InnoDB 引擎的默认隔离级别</font></strong>；</p> <p>解决的问题：</p> <p>✅脏读</p> <p>✅不可重复读</p> <p>存在的问题：</p> <p>🚫幻读（显然，进一步推理也解决不了）</p> <h4 id="面试扩展"><a href="#面试扩展" class="header-anchor">#</a> 面试扩展：</h4> <p>​	不同的数据库厂商对 SQL 标准中规定的 4 种隔离级别的支持不一样，有的数据库只实现了其中几种隔离级别，<strong>我们讨论的 <font style="background:yellow;">MySQL 虽然支持 4 种隔离级别，但是与SQL 标准中规定的各级隔离级别允许发生的现象却有些出入</font></strong>。</p> <p>​	MySQL 在「可重复读」隔离级别下，可以<font style="background:yellow;">很大程度上避免幻读现象的发生（注意是很大程度避免，并不是彻底避免</font>），所以 MySQL 并不会使用「串行化」隔离级别来避免幻读现象的发生，因为使用「串行化」隔离级别会<strong>影响性能</strong>。</p> <p>​	<strong>MySQL InnoDB 引擎的默认隔离级别虽然是「可重复读」，但是它很大程度上避免幻读现象（并不是完全解决了，详见这篇<a href="https://xiaolincoding.com/mysql/transaction/phantom.html" target="_blank" rel="noopener noreferrer">文章 (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</strong>，<font style="background:MediumSpringGreen;">解决的方案有两种</font>：</p> <ul><li>针对**<font style="background:MediumSpringGreen;">快照读</font><strong>（普通 select 语句），是</strong>通过 <font style="background:MediumSpringGreen;">MVCC 方式</font>解决了幻读**，因为可重复读隔离级别下，事务执行过程中看到的数据，一直跟这个事务启动时看到的数据是一致的，即使中途有其他事务插入了一条数据，是查询不出来这条数据的，所以就很好了避免幻读问题。</li> <li>针对**<font style="background:MediumSpringGreen;">当前读</font><strong>（select ... for update 等语句），是</strong>通过 <font style="background:MediumSpringGreen;">next-key lock（记录锁+间隙锁）</font>方式解决了幻读**，因为当执行 <code>select ... for update</code> 语句的时候，会加上 next-key lock，如果<strong>有其他事务</strong>在 next-key lock 锁范围内插入了一条记录，那么<strong>这个插入语句就会被阻塞，无法成功插入</strong>，所以就很好了避免幻读问题。</li></ul> <h4 id="_4-串行化-serializable-无脑上大锁-啥都能解决"><a href="#_4-串行化-serializable-无脑上大锁-啥都能解决" class="header-anchor">#</a> 4.<strong>串行化（serializable）</strong><font style="background:yellow;">无脑上大锁，啥都能解决</font></h4> <p>​	<strong>对记录加上读写锁</strong>，在多个事务对这条记录进行读写操作时，如果发生了读写冲突的时候，后访问的事务必须等前一个事务执行完成，才能继续执行；</p> <p>解决的问题：</p> <p>✅脏读</p> <p>✅不可重复读</p> <p>✅幻读</p> <p>不存在，并行化的问题了！</p> <h3 id="_4进阶问题-这四种隔离级别具体是如何实现的呢"><a href="#_4进阶问题-这四种隔离级别具体是如何实现的呢" class="header-anchor">#</a> 4进阶问题-这四种隔离级别具体是如何实现的呢？</h3> <p>（easy）对于「读未提交」隔离级别的事务来说，因为<strong>可以读到未提交事务修改的数据</strong>，所以<strong>直接「马不停蹄的」读取最新的数据</strong>就好了；</p> <p>​	对于「读提交」和「可重复读」隔离级别的事务来说，它们是通过 <strong><font style="background:yellow;">Read View （读取视图，大概意思就是当前情况创建1个试图）</font>来实现的，它们的区别在于<font style="background:yellow;">创建 Read View 的时机不同</font>，大家可以把 Read View 理解成一个数据快照，就像相机拍照那样，定格某一时刻的风景。</strong></p> <ul><li>「读提交」隔离级别是在「每个语句<font style="background:yellow;">执行前</font>」都会重新生成一个 Read View</li> <li>而「可重复读」隔离级别是「<font style="background:yellow;">启动事务时</font>」生成一个 Read View，然后整个事务期间都在用这个 Read View。</li></ul> <p>注意，<strong>执行「开始事务」命令，并不意味着启动了事务</strong>。在 MySQL 有两种开启事务的命令，分别是：</p> <ul><li>第一种：<code>begin/start transaction</code> 命令；</li> <li>第二种：<code>start transaction with consistent snapshot</code> 命令；
<ul><li><font style="background:yellow;">consistent snapshot, 一致性快照</font></li></ul></li></ul> <p>这两种开启事务的命令，事务的启动时机是不同的：</p> <ul><li>执行了 <code>begin/start transaction</code> 命令后，并<strong>不代表事务启动了</strong>。只有在执行这个命令后，执行了增删查改操作的 SQL 语句，才是事务真正启动的时机；</li> <li>执行了 <code>start transaction with consistent snapsho</code>t 命令，就会<font style="background:yellow;">马上启动事务</font>。</li></ul> <p>（easy）对于「串行化」隔离级别的事务来说，通过<strong>加读写锁的方式</strong>来避免并行访问；</p> <h3 id="_4-2-请你介绍一下mysql的mvcc机制"><a href="#_4-2-请你介绍一下mysql的mvcc机制" class="header-anchor">#</a> 4.2.请你介绍一下mysql的MVCC机制</h3> <p>3个构成！</p> <p>版本链</p> <p>undo-logo（版本指针）</p> <p>read view</p> <p>​	<strong>MVCC（Multi-Version Concurrency Control，多版本并发控制）</strong>，MVCC是一种多版本并发控制机制是MySQL的<strong>InnoDB存储引擎</strong><font style="background:yellow;">实现</font><strong>隔离级别</strong>的一种具体方式，用于实现<strong>读已提交读</strong>和<strong>可重复读</strong>这两种隔离级别。</p> <p>​	MVCC是通过保存数据在某个时间点的<strong>快照</strong>来实现该机制，其在每行记录后面保存两个<strong>隐藏的列</strong>，分别保存这个行的创建版本号和删除版本号，然后Innodb的MVCC使用到的快照存储在Undo日志中，该日志通过回滚指针把一个数据行所有快照连接起来。</p> <h3 id="_4-3-请问sql优化方法有哪些"><a href="#_4-3-请问sql优化方法有哪些" class="header-anchor">#</a> 4.3.请问SQL优化方法有哪些</h3> <ul><li>1、通过<strong>建立索引</strong>对查询进行优化</li> <li>2、对<strong>查询进行优化</strong>，应尽量避免全表扫描『或许这就是我们每个人写SQL语句还分级别的地方』</li></ul> <h3 id="_4-4-说一下mysql引擎的概念和分类"><a href="#_4-4-说一下mysql引擎的概念和分类" class="header-anchor">#</a> 4.4.说一下MySQL引擎的概念和分类</h3> <blockquote><p>MySQL引擎</p></blockquote> <p>MySQL中的数据用<strong>各种不同的技术</strong>存储在文件（或者内存）中。这些技术中的每一种技术都使用不同的存储机制、索引技巧、锁定水平并且最终提供广泛的不同的功能和能力。通过选择不同的技术，你能够获得额外的速度或者功能，从而改善你的应用的整体功能。</p> <p>数据库引擎是用于存储、处理和保护数据的核心服务。利用数据库引擎可控制访问权限并快速处理事务，从而满足企业内大多数需要处理大量数据的应用程序的要求。使用数据库引擎创建用于联机事务处理或联机分析处理数据的关系数据库。这包括创建用于存储数据的表和用于查看、管理和保护数据安全的数据库对象（如索引、视图和存储过程）。</p> <p>MySQL存储引擎主要有：</p> <ul><li>MyIsam</li> <li>InnoDB</li> <li>Memory、Blackhole、CSV、Performance_Schema、Archive、Federated、Mrg_Myisam。</li></ul> <p>但是最常用的是InnoDB和Mylsam。</p> <h3 id="_4-5-说一下最常用的2个mysql引擎innodb和mylsam的对比"><a href="#_4-5-说一下最常用的2个mysql引擎innodb和mylsam的对比" class="header-anchor">#</a> 4.5.说一下最常用的2个MySQL引擎InnoDB和Mylsam的对比</h3> <h4 id="_1、mylsam"><a href="#_1、mylsam" class="header-anchor">#</a> 1、Mylsam</h4> <p>MyIASM是MySQL<font style="background:yellow;">默认</font>的引擎，但是<font style="background:yellow;">它没有提供对数据库事务的支持</font>，也不支持行级锁和外键，因此当INSERT或UPDATE数据时即写操作需要<strong>锁定整个表</strong>，效率便会低一些。</p> <p>MyIsam 存储引擎独立于操作系统，也就是可以在windows上使用，也可以比较简单的将数据转移到linux操作系统上去。</p> <p><strong>适用场景</strong>：</p> <ul><li><p>不支持事务的设计，但是并不代表着有事务操作的项目不能用MyIsam存储引擎，可以在service层进行根据自己的业务需求进行相应的控制。</p></li> <li><p>不支持外键的表设计。</p></li> <li><p>查询速度很快，如果数据库insert和update的操作比较多的话比较适用。</p></li> <li><p><strong>整天对表进行加锁</strong>的场景。</p></li> <li><p>MyISAM极度强调快速读取操作。</p></li> <li><p>MyIASM中存储了表的行数，于是<code>SELECT COUNT(*) FROM TABLE</code>时只需要直接读取已经保存好的值而不需要进行全表扫描。如果表的读操作远远多于写操作且不需要数据库事务的支持，那么MyIASM也是很好的选择。</p></li></ul> <p><strong>缺点</strong>：</p> <ul><li>就是不能在表损坏后主动恢复数据。</li></ul> <p><strong>索引结构</strong>：</p> <p>MyISAM索引用的<strong>B+ tree</strong>来储存数据，MyISAM索引的指针指向的是键值的地址，地址存储的是数据。B+Tree的数据域存储的内容为实际数据的地址，也就是说它的索引和实际的数据是分开的，只不过是用索引指向了实际的数据，这种索引就是所谓的<strong>非聚集索引</strong>。</p> <h4 id="_2、innodb"><a href="#_2、innodb" class="header-anchor">#</a> 2、InnoDB</h4> <p>InnoDB是一个<strong>事务型</strong>的存储引擎，有行级锁定和外键约束。</p> <p>Innodb引擎提供了对数据库ACID事务的支持，并且实现了SQL标准的四种隔离级别，关于数据库事务与其隔离级别的内容请见数据库事务与其隔离级别这类型的文章。该引擎还提供了行级锁和外键约束</p> <p>它的设计目标是<strong>处理大容量数据库系统</strong>，它本身其实就是基于MySQL后台的完整数据库系统，MySQL运行时Innodb会在<strong>内存</strong>中建立缓冲池，用于缓冲数据和索引。但是该引擎不支持FULLTEXT类型的索引，而且它没有保存表的行数，当<code>SELECT COUNT(*) FROM TABLE</code>时需要扫描全表。当需要使用数据库事务时，该引擎当然是首选。由于锁的粒度更小，写操作不会锁定全表，所以在并发较高时，使用Innodb引擎会提升效率。但是使用行级锁也不是绝对的，如果在执行一个SQL语句时MySQL不能确定要扫描的范围，InnoDB表同样会锁全表。</p> <p><strong>适用场景</strong>：</p> <ul><li><p><strong>经常更新的表</strong>，适合处理多重并发的更新请求。</p></li> <li><p>支持事务。</p></li> <li><p>可以从灾难中恢复（通过bin-log日志等）。</p></li> <li><p>外键约束。只有他支持外键。</p></li> <li><p>支持自动增加列属性auto_increment。</p></li></ul> <p><strong>索引结构</strong>：</p> <p>InnoDB也是<strong>B+Tree</strong>索引结构。Innodb的索引文件本身就是数据文件，即B+Tree的数据域存储的就是实际的数据，这种索引就是<strong>聚集索引</strong>。这个索引的key就是数据表的主键，因此InnoDB表数据文件本身就是主索引。</p> <p>InnoDB的辅助索引数据域存储的也是相应记录主键的值而不是地址，所以当以辅助索引查找时，会先根据辅助索引找到主键，再根据主键索引找到实际的数据。所以Innodb不建议使用过长的主键，否则会使辅助索引变得过大。建议使用自增的字段作为主键，这样B+Tree的每一个结点都会被顺序的填满，而不会频繁的分裂调整，会有效的提升插入数据的效率。</p> <h3 id="最左匹配原则的原理"><a href="#最左匹配原则的原理" class="header-anchor">#</a> 最左匹配原则的原理</h3> <p>​	最左匹配原则都是针对<strong>联合索引</strong>来说的，最左匹配原则就是指在联合索引中，如果你的 SQL 语句中用到了联合索引中的<strong>最左边的索引</strong>，那么这条 SQL 语句就可以利用这个联合索引去进行匹配。例如某表现有索引(a,b,c)，现在你有如下语句：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t <span class="token keyword">where</span> a<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> b<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> c <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>     <span class="token comment">#这样可以利用到定义的索引（a,b,c）,用上a,b,c</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t <span class="token keyword">where</span> a<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> b<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>     		<span class="token comment">#这样可以利用到定义的索引（a,b,c）,用上a,b</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t <span class="token keyword">where</span> b<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>     	<span class="token comment">#这样⭐可以⭐利用到定义的索引（a,b,c）,用上a,c（mysql有查询优化器）</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t <span class="token keyword">where</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>     				<span class="token comment">#这样也可以利用到定义的索引（a,b,c）,用上a</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t <span class="token keyword">where</span> b<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> c<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>     <span class="token comment">#这样⭐不可以⭐利用到定义的索引（a,b,c）</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t <span class="token keyword">where</span> a<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> c<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>     <span class="token comment">#这样可以利用到定义的索引（a,b,c），⭐但只用上a索引⭐，b,c索引用不到</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>显然，联合索引非最左匹配还会导致<strong>索引失效</strong></li></ul> <h2 id="面试代码题"><a href="#面试代码题" class="header-anchor">#</a> 面试代码题</h2> <h3 id="_1-查询排名前10的数据"><a href="#_1-查询排名前10的数据" class="header-anchor">#</a> 1.查询排名前10的数据</h3> <h1 id="sql查询各科成绩前三名"><a href="#sql查询各科成绩前三名" class="header-anchor">#</a> sql查询各科成绩前三名</h1> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>create table scores(
name varchar(100),
subject varchar(100),
score int
);
insert into scores values
('学生a','java','100'),
('学生b','java','90'),
('学生c','java','90'),
('学生d','java','60'),
('学生e','java','80'),
('学生a','python','100'),
('学生b','python','90'),
('学生c','python','90'),
('学生d','python','60'),
('学生e','python','80');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>MYSQL取表中分数排名前10%的学生信息</p> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT `name` FROM(
  select table.`name`, @row_num:=@row_num+1 as row_num
  from table, (SELECT @row_num:=1) as b
  ORDER BY score DESC
) new_table
where new_table.row_num &lt;= @row_num*0.1;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2-mysql查询第1到2这2条语句"><a href="#_2-mysql查询第1到2这2条语句" class="header-anchor">#</a> 2.mysql查询第1到2这2条语句</h3> <div class="language-mysql line-numbers-mode"><pre class="language-text"><code>SELECT * from Customers limit 0,2; #LIMIT子句限制查询结果的条数, 表示从【LIMIT 初始位置，记录数】

#1、注意1，初始位置是从0开始
#2、注意2，是初始位置+记录数
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-mysql line-numbers-mode"><pre class="language-text"><code>DROP TABLE IF EXISTS `Customers`;

CREATE TABLE IF NOT EXISTS `Customers`(
    cust_id VARCHAR(255) DEFAULT NULL
);

INSERT `Customers` VALUES ('A'),('B'),('C');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_3-联表查询"><a href="#_3-联表查询" class="header-anchor">#</a> 3.联表查询</h3> <p>联表查询在平时的项目中经常遇到,比方我们有如下两张表,从上面两张表可以看出他们存在<code>dept id</code>为关联的关系，所以就会存在如下需求：找出EmployeeTB中员工与DeptTB中部门之间对应关系；</p> <ul><li>参考资料：https://www.jianshu.com/p/1d02f1e9aad1</li></ul> <h2 id="附录-搭建mysql学习环境"><a href="#附录-搭建mysql学习环境" class="header-anchor">#</a> 附录-搭建mysql学习环境</h2> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> @@basedir<span class="token punctuation">;</span>  //安装目录
+-----------+
<span class="token operator">|</span> @@basedir <span class="token operator">|</span>
+-----------+
<span class="token operator">|</span> /usr/     <span class="token operator">|</span>
+-----------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> @@datadir<span class="token punctuation">;</span>  //数据目录
+-----------------+
<span class="token operator">|</span> @@datadir       <span class="token operator">|</span>
+-----------------+
<span class="token operator">|</span> /var/lib/mysql/ <span class="token operator">|</span>
+-----------------+
<span class="token number">1</span> row <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="参看资料"><a href="#参看资料" class="header-anchor">#</a> 参看资料</h2> <ul><li>哔哩哔哩，<a href="https://www.bilibili.com/video/BV15Y4y1i78Y?p=3&amp;spm_id_from=pageDriver&amp;vd_source=ea20f1fccee6fd3f1af7d59cd3ae7575" target="_blank" rel="noopener noreferrer">MySQL技术内幕-InnoDB存储引擎<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d6bf34d0.js" defer></script><script src="/assets/js/2.fd3114d8.js" defer></script><script src="/assets/js/129.d50b838b.js" defer></script>
  </body>
</html>
