<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面试模版part2 | whoway</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/images/photo.jpg">
    <link rel="manifest" href="/images/photo.jpg">
    <link rel="apple-touch-icon" href="/images/photo.jpg">
    <meta name="description" content="Personal Blog Website">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
    <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.e8e4f3a3.css" as="style"><link rel="preload" href="/assets/js/app.7b0a0df4.js" as="script"><link rel="preload" href="/assets/js/2.fd3114d8.js" as="script"><link rel="preload" href="/assets/js/7.697ae5ac.js" as="script"><link rel="prefetch" href="/assets/js/10.48ffca33.js"><link rel="prefetch" href="/assets/js/100.c8a3c21c.js"><link rel="prefetch" href="/assets/js/101.1d1e5fd2.js"><link rel="prefetch" href="/assets/js/102.a7483634.js"><link rel="prefetch" href="/assets/js/103.b421602b.js"><link rel="prefetch" href="/assets/js/104.281189b0.js"><link rel="prefetch" href="/assets/js/105.3c594084.js"><link rel="prefetch" href="/assets/js/106.10a1f403.js"><link rel="prefetch" href="/assets/js/107.fc6abcdd.js"><link rel="prefetch" href="/assets/js/108.6f8fb9df.js"><link rel="prefetch" href="/assets/js/109.18826150.js"><link rel="prefetch" href="/assets/js/11.7ede0041.js"><link rel="prefetch" href="/assets/js/110.57380901.js"><link rel="prefetch" href="/assets/js/111.23d425bb.js"><link rel="prefetch" href="/assets/js/112.863080e1.js"><link rel="prefetch" href="/assets/js/113.f4898658.js"><link rel="prefetch" href="/assets/js/114.845f2509.js"><link rel="prefetch" href="/assets/js/115.0f30ae2d.js"><link rel="prefetch" href="/assets/js/116.7125181f.js"><link rel="prefetch" href="/assets/js/117.7e336042.js"><link rel="prefetch" href="/assets/js/118.89c8d0ba.js"><link rel="prefetch" href="/assets/js/119.34517709.js"><link rel="prefetch" href="/assets/js/12.bd674d94.js"><link rel="prefetch" href="/assets/js/120.f33397f8.js"><link rel="prefetch" href="/assets/js/121.42c16c54.js"><link rel="prefetch" href="/assets/js/122.e7a0cc1b.js"><link rel="prefetch" href="/assets/js/123.dc737b0c.js"><link rel="prefetch" href="/assets/js/124.4261ced1.js"><link rel="prefetch" href="/assets/js/125.21ddb1cc.js"><link rel="prefetch" href="/assets/js/126.b34db922.js"><link rel="prefetch" href="/assets/js/127.961a82df.js"><link rel="prefetch" href="/assets/js/128.3a57142b.js"><link rel="prefetch" href="/assets/js/129.94a9366d.js"><link rel="prefetch" href="/assets/js/13.b43989da.js"><link rel="prefetch" href="/assets/js/130.8bff52ff.js"><link rel="prefetch" href="/assets/js/131.8e46199f.js"><link rel="prefetch" href="/assets/js/132.39cacbe3.js"><link rel="prefetch" href="/assets/js/133.f48ca037.js"><link rel="prefetch" href="/assets/js/134.e4e5398e.js"><link rel="prefetch" href="/assets/js/135.d04daadc.js"><link rel="prefetch" href="/assets/js/136.df914fde.js"><link rel="prefetch" href="/assets/js/137.b8b63fe4.js"><link rel="prefetch" href="/assets/js/138.0aeb7493.js"><link rel="prefetch" href="/assets/js/139.8492dcec.js"><link rel="prefetch" href="/assets/js/14.622c3b5a.js"><link rel="prefetch" href="/assets/js/140.8cb0336b.js"><link rel="prefetch" href="/assets/js/141.b88bcdbe.js"><link rel="prefetch" href="/assets/js/142.d814becb.js"><link rel="prefetch" href="/assets/js/143.78aeb940.js"><link rel="prefetch" href="/assets/js/144.2aed58ed.js"><link rel="prefetch" href="/assets/js/145.d333069b.js"><link rel="prefetch" href="/assets/js/146.dadb7c99.js"><link rel="prefetch" href="/assets/js/147.738e2ef3.js"><link rel="prefetch" href="/assets/js/148.ab5c389a.js"><link rel="prefetch" href="/assets/js/149.b38478d2.js"><link rel="prefetch" href="/assets/js/15.25d0807b.js"><link rel="prefetch" href="/assets/js/150.20711bd6.js"><link rel="prefetch" href="/assets/js/151.9aba2450.js"><link rel="prefetch" href="/assets/js/152.e69df31f.js"><link rel="prefetch" href="/assets/js/153.aa2a85cd.js"><link rel="prefetch" href="/assets/js/154.a724ff1e.js"><link rel="prefetch" href="/assets/js/155.dec9efc9.js"><link rel="prefetch" href="/assets/js/156.a7b72253.js"><link rel="prefetch" href="/assets/js/157.8d90a769.js"><link rel="prefetch" href="/assets/js/158.26f53023.js"><link rel="prefetch" href="/assets/js/159.5d2a4111.js"><link rel="prefetch" href="/assets/js/16.8d78a6ad.js"><link rel="prefetch" href="/assets/js/160.aa770ee5.js"><link rel="prefetch" href="/assets/js/161.66d26b22.js"><link rel="prefetch" href="/assets/js/162.08698ce8.js"><link rel="prefetch" href="/assets/js/163.a3161af3.js"><link rel="prefetch" href="/assets/js/164.c64366b3.js"><link rel="prefetch" href="/assets/js/165.7c511991.js"><link rel="prefetch" href="/assets/js/166.8345b907.js"><link rel="prefetch" href="/assets/js/167.1db7ac9d.js"><link rel="prefetch" href="/assets/js/168.9034b0e1.js"><link rel="prefetch" href="/assets/js/169.fd7fabb8.js"><link rel="prefetch" href="/assets/js/17.4efd5fd7.js"><link rel="prefetch" href="/assets/js/170.83a912f4.js"><link rel="prefetch" href="/assets/js/171.343a2146.js"><link rel="prefetch" href="/assets/js/172.21d83e51.js"><link rel="prefetch" href="/assets/js/173.f74b50d3.js"><link rel="prefetch" href="/assets/js/174.c0357406.js"><link rel="prefetch" href="/assets/js/175.a0167e87.js"><link rel="prefetch" href="/assets/js/176.5251b367.js"><link rel="prefetch" href="/assets/js/177.6f8782f3.js"><link rel="prefetch" href="/assets/js/178.09df18fc.js"><link rel="prefetch" href="/assets/js/179.eb86ccc3.js"><link rel="prefetch" href="/assets/js/18.61f36b5f.js"><link rel="prefetch" href="/assets/js/180.e237baad.js"><link rel="prefetch" href="/assets/js/181.2c94a830.js"><link rel="prefetch" href="/assets/js/182.3452d0ad.js"><link rel="prefetch" href="/assets/js/183.d3786c62.js"><link rel="prefetch" href="/assets/js/184.1ccc1d71.js"><link rel="prefetch" href="/assets/js/185.9f9df1bf.js"><link rel="prefetch" href="/assets/js/186.eafdb674.js"><link rel="prefetch" href="/assets/js/187.97764984.js"><link rel="prefetch" href="/assets/js/188.338c46d2.js"><link rel="prefetch" href="/assets/js/189.2ced65c6.js"><link rel="prefetch" href="/assets/js/19.5e429ac9.js"><link rel="prefetch" href="/assets/js/190.7b654243.js"><link rel="prefetch" href="/assets/js/191.2ad68d17.js"><link rel="prefetch" href="/assets/js/192.709fbad2.js"><link rel="prefetch" href="/assets/js/193.9cb27be1.js"><link rel="prefetch" href="/assets/js/194.9fcda0a7.js"><link rel="prefetch" href="/assets/js/195.c5a3c106.js"><link rel="prefetch" href="/assets/js/196.d559ce4c.js"><link rel="prefetch" href="/assets/js/197.7307c9f1.js"><link rel="prefetch" href="/assets/js/198.55daac04.js"><link rel="prefetch" href="/assets/js/199.bd07eaf5.js"><link rel="prefetch" href="/assets/js/20.23943046.js"><link rel="prefetch" href="/assets/js/200.0026532e.js"><link rel="prefetch" href="/assets/js/201.f5f970b3.js"><link rel="prefetch" href="/assets/js/202.9dfaf43f.js"><link rel="prefetch" href="/assets/js/203.903eaa77.js"><link rel="prefetch" href="/assets/js/204.e31d63ea.js"><link rel="prefetch" href="/assets/js/205.262de9db.js"><link rel="prefetch" href="/assets/js/206.d09e9ff4.js"><link rel="prefetch" href="/assets/js/207.16c09bb4.js"><link rel="prefetch" href="/assets/js/208.2458e665.js"><link rel="prefetch" href="/assets/js/209.3a4cc24c.js"><link rel="prefetch" href="/assets/js/21.cbe7ba17.js"><link rel="prefetch" href="/assets/js/210.9f408ebb.js"><link rel="prefetch" href="/assets/js/211.4261ee07.js"><link rel="prefetch" href="/assets/js/212.90f9897f.js"><link rel="prefetch" href="/assets/js/213.a935f2a1.js"><link rel="prefetch" href="/assets/js/214.c1b1f8a7.js"><link rel="prefetch" href="/assets/js/215.7f2eb045.js"><link rel="prefetch" href="/assets/js/216.29694ce5.js"><link rel="prefetch" href="/assets/js/217.a59b4393.js"><link rel="prefetch" href="/assets/js/218.ae993a31.js"><link rel="prefetch" href="/assets/js/219.65ccf67d.js"><link rel="prefetch" href="/assets/js/22.e053cb7c.js"><link rel="prefetch" href="/assets/js/220.82f331af.js"><link rel="prefetch" href="/assets/js/221.69a741e3.js"><link rel="prefetch" href="/assets/js/222.dc5d70ef.js"><link rel="prefetch" href="/assets/js/223.60349ee2.js"><link rel="prefetch" href="/assets/js/224.80afb9f4.js"><link rel="prefetch" href="/assets/js/225.4fd28186.js"><link rel="prefetch" href="/assets/js/226.245ea195.js"><link rel="prefetch" href="/assets/js/227.96d85711.js"><link rel="prefetch" href="/assets/js/23.2e12610b.js"><link rel="prefetch" href="/assets/js/24.c73970bd.js"><link rel="prefetch" href="/assets/js/25.d6d39b36.js"><link rel="prefetch" href="/assets/js/26.444c765e.js"><link rel="prefetch" href="/assets/js/27.e32aad29.js"><link rel="prefetch" href="/assets/js/28.efde1374.js"><link rel="prefetch" href="/assets/js/29.ea9b9a7e.js"><link rel="prefetch" href="/assets/js/3.79d6effb.js"><link rel="prefetch" href="/assets/js/30.f2ab7867.js"><link rel="prefetch" href="/assets/js/31.c861762c.js"><link rel="prefetch" href="/assets/js/32.0421d761.js"><link rel="prefetch" href="/assets/js/33.c4e4c6bf.js"><link rel="prefetch" href="/assets/js/34.2c538580.js"><link rel="prefetch" href="/assets/js/35.a9593ee0.js"><link rel="prefetch" href="/assets/js/36.427c2f85.js"><link rel="prefetch" href="/assets/js/37.38493a96.js"><link rel="prefetch" href="/assets/js/38.549815e1.js"><link rel="prefetch" href="/assets/js/39.bf28e8d9.js"><link rel="prefetch" href="/assets/js/4.2f941e70.js"><link rel="prefetch" href="/assets/js/40.1212795b.js"><link rel="prefetch" href="/assets/js/41.88e53f69.js"><link rel="prefetch" href="/assets/js/42.b99d9416.js"><link rel="prefetch" href="/assets/js/43.6bf7be94.js"><link rel="prefetch" href="/assets/js/44.a284dbbb.js"><link rel="prefetch" href="/assets/js/45.f2cd4c8e.js"><link rel="prefetch" href="/assets/js/46.eab339f2.js"><link rel="prefetch" href="/assets/js/47.ba051c37.js"><link rel="prefetch" href="/assets/js/48.e6030994.js"><link rel="prefetch" href="/assets/js/49.db648e5c.js"><link rel="prefetch" href="/assets/js/5.4832b9d7.js"><link rel="prefetch" href="/assets/js/50.26c56630.js"><link rel="prefetch" href="/assets/js/51.f9d2b3db.js"><link rel="prefetch" href="/assets/js/52.0eda579f.js"><link rel="prefetch" href="/assets/js/53.6c2fd733.js"><link rel="prefetch" href="/assets/js/54.c16c540f.js"><link rel="prefetch" href="/assets/js/55.decc47a1.js"><link rel="prefetch" href="/assets/js/56.009be23f.js"><link rel="prefetch" href="/assets/js/57.743c9324.js"><link rel="prefetch" href="/assets/js/58.ec63f251.js"><link rel="prefetch" href="/assets/js/59.96c9b35e.js"><link rel="prefetch" href="/assets/js/6.b23f8b71.js"><link rel="prefetch" href="/assets/js/60.4c182e15.js"><link rel="prefetch" href="/assets/js/61.ac0142a0.js"><link rel="prefetch" href="/assets/js/62.b2d11e26.js"><link rel="prefetch" href="/assets/js/63.e1b29510.js"><link rel="prefetch" href="/assets/js/64.8da78f26.js"><link rel="prefetch" href="/assets/js/65.1f360481.js"><link rel="prefetch" href="/assets/js/66.5ec7c26a.js"><link rel="prefetch" href="/assets/js/67.524ae338.js"><link rel="prefetch" href="/assets/js/68.cf5fac15.js"><link rel="prefetch" href="/assets/js/69.78b26446.js"><link rel="prefetch" href="/assets/js/70.4750f89f.js"><link rel="prefetch" href="/assets/js/71.ab520cfd.js"><link rel="prefetch" href="/assets/js/72.a428dc91.js"><link rel="prefetch" href="/assets/js/73.316cd083.js"><link rel="prefetch" href="/assets/js/74.c4528c0a.js"><link rel="prefetch" href="/assets/js/75.1c10894d.js"><link rel="prefetch" href="/assets/js/76.5e6b223e.js"><link rel="prefetch" href="/assets/js/77.852379fa.js"><link rel="prefetch" href="/assets/js/78.8a62e17c.js"><link rel="prefetch" href="/assets/js/79.762432a6.js"><link rel="prefetch" href="/assets/js/8.258d3f59.js"><link rel="prefetch" href="/assets/js/80.683b1e49.js"><link rel="prefetch" href="/assets/js/81.177baad9.js"><link rel="prefetch" href="/assets/js/82.94d1daa6.js"><link rel="prefetch" href="/assets/js/83.39dda9f3.js"><link rel="prefetch" href="/assets/js/84.74460b32.js"><link rel="prefetch" href="/assets/js/85.fb624dce.js"><link rel="prefetch" href="/assets/js/86.efa5d23e.js"><link rel="prefetch" href="/assets/js/87.c33efbee.js"><link rel="prefetch" href="/assets/js/88.11ee3b5b.js"><link rel="prefetch" href="/assets/js/89.5436dfd8.js"><link rel="prefetch" href="/assets/js/9.af54c745.js"><link rel="prefetch" href="/assets/js/90.4c4610fd.js"><link rel="prefetch" href="/assets/js/91.5c7146a8.js"><link rel="prefetch" href="/assets/js/92.d8aad443.js"><link rel="prefetch" href="/assets/js/93.4cc59dc5.js"><link rel="prefetch" href="/assets/js/94.7fe1cc0c.js"><link rel="prefetch" href="/assets/js/95.05a02d29.js"><link rel="prefetch" href="/assets/js/96.9d23e375.js"><link rel="prefetch" href="/assets/js/97.74eb9b1f.js"><link rel="prefetch" href="/assets/js/98.8a41e507.js"><link rel="prefetch" href="/assets/js/99.3fee399a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8e4f3a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">whoway</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🎓Coding" class="dropdown-title"><span class="title">🎓Coding</span> <span class="arrow down"></span></button> <button type="button" aria-label="🎓Coding" class="mobile-dropdown-title"><span class="title">🎓Coding</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/00.Coding/TheBeautyOfProgramming/" class="nav-link">
  🔖编程之美题解
</a></li><li class="dropdown-item"><!----> <a href="/00.Coding/CodeWarehouse/" class="nav-link">
  🔖代码意识流
</a></li><li class="dropdown-item"><!----> <a href="/00.Coding/" class="nav-link">
  🔖面试题题解
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🚀语言" class="dropdown-title"><span class="title">🚀语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="🚀语言" class="mobile-dropdown-title"><span class="title">🚀语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/01.Language/Overview/" class="nav-link">
  🔖概述
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/C/" class="nav-link">
  ⭐️C
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Cpp/" class="nav-link">
  🚀C++
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Java/" class="nav-link">
  ☕️Java
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Python/" class="nav-link">
  🧩Python3
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Fortran/" class="nav-link">
  🎲Fortran
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/JavaScript/" class="nav-link">
  🎨JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="/02.Hardware/" class="nav-link">
  ✔️硬件基础
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⭐️软件基础" class="dropdown-title"><span class="title">⭐️软件基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="⭐️软件基础" class="mobile-dropdown-title"><span class="title">⭐️软件基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/03.Software/01.DataStructureAndAlgorithm/" class="nav-link router-link-active">
  🐾数据结构和算法
</a></li><li class="dropdown-item"><!----> <a href="/03.Software/02.server/" class="nav-link">
  🎨server
</a></li><li class="dropdown-item"><!----> <a href="/03.Software/03.Database/" class="nav-link">
  🔖数据库
</a></li><li class="dropdown-item"><!----> <a href="/03.Software/04.SE/" class="nav-link">
  ✅软件工程
</a></li></ul></div></div><div class="nav-item"><a href="/04.PerformanceOpt/" class="nav-link">
  🔥性能调优
</a></div><div class="nav-item"><a href="/05.Engineer/" class="nav-link">
  🔖学术/工程
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⚙️工具" class="dropdown-title"><span class="title">⚙️工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="⚙️工具" class="mobile-dropdown-title"><span class="title">⚙️工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/06.Tools/01.employment/" class="nav-link">
  🔖求职
</a></li><li class="dropdown-item"><!----> <a href="/06.Tools/02.efficiency/" class="nav-link">
  🚀效能
</a></li><li class="dropdown-item"><!----> <a href="/06.Tools/03.windows/" class="nav-link">
  ⚙️Windows
</a></li><li class="dropdown-item"><!----> <a href="/06.Tools/04.design/" class="nav-link">
  🧩设计
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/whoway" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🎓Coding" class="dropdown-title"><span class="title">🎓Coding</span> <span class="arrow down"></span></button> <button type="button" aria-label="🎓Coding" class="mobile-dropdown-title"><span class="title">🎓Coding</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/00.Coding/TheBeautyOfProgramming/" class="nav-link">
  🔖编程之美题解
</a></li><li class="dropdown-item"><!----> <a href="/00.Coding/CodeWarehouse/" class="nav-link">
  🔖代码意识流
</a></li><li class="dropdown-item"><!----> <a href="/00.Coding/" class="nav-link">
  🔖面试题题解
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🚀语言" class="dropdown-title"><span class="title">🚀语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="🚀语言" class="mobile-dropdown-title"><span class="title">🚀语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/01.Language/Overview/" class="nav-link">
  🔖概述
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/C/" class="nav-link">
  ⭐️C
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Cpp/" class="nav-link">
  🚀C++
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Java/" class="nav-link">
  ☕️Java
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Python/" class="nav-link">
  🧩Python3
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/Fortran/" class="nav-link">
  🎲Fortran
</a></li><li class="dropdown-item"><!----> <a href="/01.Language/JavaScript/" class="nav-link">
  🎨JavaScript
</a></li></ul></div></div><div class="nav-item"><a href="/02.Hardware/" class="nav-link">
  ✔️硬件基础
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⭐️软件基础" class="dropdown-title"><span class="title">⭐️软件基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="⭐️软件基础" class="mobile-dropdown-title"><span class="title">⭐️软件基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/03.Software/01.DataStructureAndAlgorithm/" class="nav-link router-link-active">
  🐾数据结构和算法
</a></li><li class="dropdown-item"><!----> <a href="/03.Software/02.server/" class="nav-link">
  🎨server
</a></li><li class="dropdown-item"><!----> <a href="/03.Software/03.Database/" class="nav-link">
  🔖数据库
</a></li><li class="dropdown-item"><!----> <a href="/03.Software/04.SE/" class="nav-link">
  ✅软件工程
</a></li></ul></div></div><div class="nav-item"><a href="/04.PerformanceOpt/" class="nav-link">
  🔥性能调优
</a></div><div class="nav-item"><a href="/05.Engineer/" class="nav-link">
  🔖学术/工程
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⚙️工具" class="dropdown-title"><span class="title">⚙️工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="⚙️工具" class="mobile-dropdown-title"><span class="title">⚙️工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/06.Tools/01.employment/" class="nav-link">
  🔖求职
</a></li><li class="dropdown-item"><!----> <a href="/06.Tools/02.efficiency/" class="nav-link">
  🚀效能
</a></li><li class="dropdown-item"><!----> <a href="/06.Tools/03.windows/" class="nav-link">
  ⚙️Windows
</a></li><li class="dropdown-item"><!----> <a href="/06.Tools/04.design/" class="nav-link">
  🧩设计
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/whoway" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>面试模版part2</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#目录" class="sidebar-link">目录</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#约瑟夫环" class="sidebar-link">约瑟夫环</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#stl提取出-全排列-『模板』" class="sidebar-link">STL提取出“全排列”『模板』</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#_1-不含重复数字-可包含重复数字『均可』" class="sidebar-link">1.不含重复数字/可包含重复数字『均可』</a></li></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#汉诺塔-递归模板" class="sidebar-link">汉诺塔-递归模板</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#格雷码的由来" class="sidebar-link">格雷码的由来</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#数字-找规律题解" class="sidebar-link">数字-找规律题解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#_1-剑指-offer-44-数字序列中某一位的数字" class="sidebar-link">1.剑指 Offer 44. 数字序列中某一位的数字</a></li><li class="sidebar-sub-header"><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#数字规律" class="sidebar-link">数字规律！</a></li></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#lru题解的模版✅" class="sidebar-link">LRU题解的模版✅</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#_2-ac代码" class="sidebar-link">2.AC代码</a></li><li class="sidebar-sub-header"><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#_3-面试问-正向迭代器和反向迭代器的区别" class="sidebar-link">3.面试问：正向迭代器和反向迭代器的区别</a></li></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#trie-前缀树✅" class="sidebar-link">Trie-前缀树✅</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#字典树类代码" class="sidebar-link">字典树类代码</a></li></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#大数算法『模板』" class="sidebar-link">大数算法『模板』</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#_1-大数加法" class="sidebar-link">1.大数加法</a></li><li class="sidebar-sub-header"><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#_2-大数乘法⭐️" class="sidebar-link">2.大数乘法⭐️</a></li><li class="sidebar-sub-header"><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#_3-大数阶乘" class="sidebar-link">3.大数阶乘</a></li></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#位运算-规律" class="sidebar-link">位运算-规律</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#_1-交换" class="sidebar-link">1.交换</a></li><li class="sidebar-sub-header"><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#_2-异或的性质" class="sidebar-link">2.异或的性质</a></li></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#代码实现memcpy「腾讯」" class="sidebar-link">代码实现memcpy「腾讯」</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#代码实现memmove「腾讯」" class="sidebar-link">代码实现memmove「腾讯」</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#代码实现strcpy" class="sidebar-link">代码实现strcpy</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#代码实现strlen" class="sidebar-link">代码实现strlen</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#代码实现strcat" class="sidebar-link">代码实现strcat</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#代码实现strcmp「学习」" class="sidebar-link">代码实现strcmp「学习」</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#如何实现一个-线程安全-的shared-ptr智能指针" class="sidebar-link">如何实现一个”线程安全“的shared_ptr智能指针？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#旷视-实现一个简单的智能指针" class="sidebar-link">旷视-实现一个简单的智能指针</a></li></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#实现一个unique-ptr-并且讲一下其raii" class="sidebar-link">实现一个unique_ptr，并且讲一下其RAII</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#实现写个-vectror" class="sidebar-link">实现写个 vectror</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#实现单例" class="sidebar-link">实现单例</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/03.Software/01.DataStructureAndAlgorithm/templatelib/2%E9%9D%A2%E8%AF%95%E4%BB%A3%E7%A0%81%E6%A8%A1%E7%89%88part2.html#k个1组反转链表" class="sidebar-link">k个1组反转链表</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="面试模版part2"><a href="#面试模版part2" class="header-anchor">#</a> 面试模版part2</h1> <h2 id="目录"><a href="#目录" class="header-anchor">#</a> 目录</h2> <p></p><div class="table-of-contents"><ul><li><a href="#目录">目录</a></li><li><a href="#约瑟夫环">约瑟夫环</a></li><li><a href="#stl提取出-全排列-『模板』">STL提取出“全排列”『模板』</a><ul><li><a href="#_1-不含重复数字-可包含重复数字『均可』">1.不含重复数字/可包含重复数字『均可』</a></li></ul></li><li><a href="#汉诺塔-递归模板">汉诺塔-递归模板</a></li><li><a href="#格雷码的由来">格雷码的由来</a></li><li><a href="#数字-找规律题解">数字-找规律题解</a><ul><li><a href="#_1-剑指-offer-44-数字序列中某一位的数字-https-leetcode-cn-com-problems-shu-zi-xu-lie-zhong-mou-yi-wei-de-shu-zi-lcof">1.剑指 Offer 44. 数字序列中某一位的数字</a></li><li><a href="#数字规律">数字规律！</a></li></ul></li><li><a href="#lru题解的模版✅">LRU题解的模版✅</a><ul><li><a href="#_2-ac代码">2.AC代码</a></li><li><a href="#_3-面试问-正向迭代器和反向迭代器的区别">3.面试问：正向迭代器和反向迭代器的区别</a></li></ul></li><li><a href="#trie-前缀树✅">Trie-前缀树✅</a><ul><li><a href="#字典树类代码">字典树类代码</a></li></ul></li><li><a href="#大数算法『模板』">大数算法『模板』</a><ul><li><a href="#_1-大数加法">1.大数加法</a></li><li><a href="#_2-大数乘法⭐️">2.大数乘法⭐️</a></li><li><a href="#_3-大数阶乘">3.大数阶乘</a></li></ul></li><li><a href="#位运算-规律">位运算-规律</a><ul><li><a href="#_1-交换">1.交换</a></li><li><a href="#_2-异或的性质">2.异或的性质</a></li></ul></li><li><a href="#代码实现memcpy「腾讯」">代码实现memcpy「腾讯」</a></li><li><a href="#代码实现memmove「腾讯」">代码实现memmove「腾讯」</a></li><li><a href="#代码实现strcpy">代码实现strcpy</a></li><li><a href="#代码实现strlen">代码实现strlen</a></li><li><a href="#代码实现strcat">代码实现strcat</a></li><li><a href="#代码实现strcmp「学习」">代码实现strcmp「学习」</a></li><li><a href="#如何实现一个-线程安全-的shared-ptr智能指针">如何实现一个”线程安全“的shared_ptr智能指针？</a><ul><li><a href="#旷视-实现一个简单的智能指针">旷视-实现一个简单的智能指针</a></li></ul></li><li><a href="#实现一个unique-ptr-并且讲一下其raii">实现一个unique_ptr，并且讲一下其RAII</a></li><li><a href="#实现写个-vectror">实现写个 vectror</a></li><li><a href="#实现单例">实现单例</a></li><li><a href="#k个1组反转链表">k个1组反转链表</a></li></ul></div><p></p> <p>[TOC]</p> <h2 id="约瑟夫环"><a href="#约瑟夫环" class="header-anchor">#</a> 约瑟夫环</h2> <ul><li><a href="https://leetcode-cn.com/problems/yuan-quan-zhong-zui-hou-sheng-xia-de-shu-zi-lcof/" target="_blank" rel="noopener noreferrer">剑指 Offer 62. 圆圈中最后剩下的数字<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>参考<a href="https://leetcode-cn.com/problems/yuan-quan-zhong-zui-hou-sheng-xia-de-shu-zi-lcof/solution/si-bu-he-xin-gong-shi-qing-song-nong-don-3vln/" target="_blank" rel="noopener noreferrer">原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="stl提取出-全排列-『模板』"><a href="#stl提取出-全排列-『模板』" class="header-anchor">#</a> STL提取出“全排列”『模板』</h2> <ul><li><a href="https://leetcode-cn.com/problems/permutations/" target="_blank" rel="noopener noreferrer">46. 全排列<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>不含重复数字的数组</li> <li><a href="https://leetcode-cn.com/problems/permutations-ii/" target="_blank" rel="noopener noreferrer">47. 全排列 II<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><strong>可包含</strong>重复数字的序列</li></ul> <h3 id="_1-不含重复数字-可包含重复数字『均可』"><a href="#_1-不含重复数字-可包含重复数字『均可』" class="header-anchor">#</a> 1.不含重复数字/可包含重复数字『均可』</h3> <ul><li><p><code>next_permutation</code>的源代码实现</p></li> <li><p><font style="background:yellow;"><code>iter_swap()</code>函数可以直接用</font></p></li> <li><p>下一个排列的算法模板：『Left（前边）  Right（后边） 』</p> <ul><li><code>next_permutation()</code>会取得<code>[Left,Right)</code>所标示之序列的下一个排列组合。</li> <li>如果没有下一个排列组合，便返回<code>false</code>，否则返回<code>true</code></li> <li>『4步伐』
<ul><li>1.首先，从『最尾端开始往前』寻找两个相邻元素，令<strong>靠近左边的第1元素</strong>为LeftOne，<strong>靠近左边的第二元素</strong>为LeftTwo，且满足<font style="background:yellow;"><code>LeftOne&lt; LeftTwo</code></font></li> <li>2.<strong>找到这样一组相邻元素后</strong>，再从『最尾端开始往前』检验,找出<strong>第1个</strong>大于LeftOne（<font style="background:yellow;"><code>LeftOne&lt;Temp</code></font>）的元素，令为Temp</li> <li>3.<code>iter_swap( LeftOne, Temp )</code></li> <li>4.再将<strong>LeftTwo及其之后</strong>的所有元素<strong>颠倒</strong>排列</li></ul></li></ul></li> <li><p>上1个排列的算法『<font style="background:yellow;">区别：见标记黄色背景的位置</font></p> <ul><li><code>prev_permutation()</code>会取得<code>[Left,Right)</code>所标示之序列的上一个排列组合。</li> <li>如果没有上一个排列组合，便返回<code>false</code>，否则返回<code>true</code></li> <li>『4步伐』
<ul><li>1.首先，从『最尾端开始往前』寻找两个相邻元素，令<strong>靠近左边的第1元素</strong>为LeftOne，<strong>靠近左边的第二元素</strong>为LeftTwo，且满足<font style="background:yellow;"><code>LeftOne&gt; LeftTwo</code></font></li> <li>2.<strong>找到这样一组相邻元素后</strong>，再从『最尾端开始往前』检验,找出<strong>第1个</strong>小于LeftOne（<font style="background:yellow;"><code>LeftOne&gt;Temp</code></font>）的元素，令为Temp</li> <li>3.<code>iter_swap( LeftOne, Temp )</code></li> <li>4.再将<strong>LeftTwo及其之后</strong>的所有元素<strong>颠倒</strong>排列</li></ul></li></ul></li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//下一个排列的算法模板</span>
<span class="token keyword">bool</span> <span class="token function">next_permutationMySelf</span>
    <span class="token punctuation">(</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator Left<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator Right <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> Left<span class="token operator">==</span>Right <span class="token operator">||</span> <span class="token number">1</span><span class="token operator">==</span><span class="token punctuation">(</span>Right<span class="token operator">-</span>Left<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token comment">//空区间或者只有1个元素的区间，所以没有下一个排列</span>
    <span class="token punctuation">{</span>
        cout<span class="token operator">&lt;&lt;</span><span class="token string">&quot;111&quot;</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//LeftOne指向倒数第2的位置</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator LeftOne<span class="token operator">=</span>Right<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token comment">//LeftTwo指向倒数第1的位置</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator LeftTwo<span class="token operator">=</span>Right<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    
    <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">*</span>LeftOne <span class="token operator">&lt;</span> <span class="token operator">*</span>LeftTwo <span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">//2.找到这样一组相邻元素后，再从最尾端开始往前检验,找出第1个大于LeftOne的元素，令为Temp</span>
            vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator Temp<span class="token operator">=</span>Right<span class="token punctuation">;</span>
            <span class="token operator">--</span>Temp<span class="token punctuation">;</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token punctuation">(</span> <span class="token operator">*</span>LeftOne <span class="token operator">&lt;</span> <span class="token operator">*</span>Temp <span class="token punctuation">)</span> <span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token operator">--</span>Temp<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            
            <span class="token function">iter_swap</span><span class="token punctuation">(</span> LeftOne<span class="token punctuation">,</span> Temp <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//3.iter_swap( LeftOne, Temp )这个函数可以直接调用</span>
            <span class="token function">reverse</span><span class="token punctuation">(</span> LeftTwo<span class="token punctuation">,</span> Right <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//4.再将LeftTwo之后的所有元素颠倒排列.</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">//如果LeftOne到尽头，表示已经是cba这样的形式了，没有下一个排列了</span>
        <span class="token comment">//在return false前，做个好事，顺路把它给倒转了</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> LeftOne<span class="token operator">==</span>Left <span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">reverse</span><span class="token punctuation">(</span> Left<span class="token punctuation">,</span> Right <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//易错点：如果*LeftOne &lt; *LeftTwo不满足，那么都要减少</span>
        <span class="token operator">--</span>LeftOne<span class="token punctuation">;</span>
        <span class="token operator">--</span>LeftTwo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//如果是LeetCode可能需要吃这个</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token function">permuteUnique</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        vector<span class="token operator">&lt;</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span> ret<span class="token punctuation">;</span>
        <span class="token function">sort</span><span class="token punctuation">(</span> nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">do</span>
        <span class="token punctuation">{</span>
            ret<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token function">next_permutationMySelf</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><h2 id="汉诺塔-递归模板"><a href="#汉诺塔-递归模板" class="header-anchor">#</a> 汉诺塔-递归模板</h2> <ul><li><a href="https://leetcode.cn/problems/hanota-lcci/" target="_blank" rel="noopener noreferrer">面试题 08.06. 汉诺塔问题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//start里面的最上面n个元素，借助helo杆子，移到end杆子上</span>
<span class="token keyword">void</span> <span class="token function">recursive</span><span class="token punctuation">(</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span>help<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span> end<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//1==n, 递归边界</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token operator">==</span>n <span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        end<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span> start<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        start<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//2==n，虚拟的n=2的绑定递归</span>

    <span class="token function">recursive</span><span class="token punctuation">(</span> start<span class="token punctuation">,</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> end<span class="token punctuation">,</span> help<span class="token punctuation">)</span><span class="token punctuation">;</span>

    end<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span> start<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    start<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">recursive</span><span class="token punctuation">(</span> help<span class="token punctuation">,</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">hanota</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> A<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> B<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> C<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> n<span class="token operator">=</span>A<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">recursive</span><span class="token punctuation">(</span> A<span class="token punctuation">,</span> n<span class="token punctuation">,</span> B<span class="token punctuation">,</span> C<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="格雷码的由来"><a href="#格雷码的由来" class="header-anchor">#</a> 格雷码的由来</h2> <ul><li>LeetCode<a href="https://leetcode-cn.com/problems/gray-code/" target="_blank" rel="noopener noreferrer">89. 格雷编码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://leetcode-cn.com/problems/gray-code/solution/c5xing-dai-ma-xiang-xi-jie-xi-dui-xin-sh-xrkw/" target="_blank" rel="noopener noreferrer">由来<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>「数学」</li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">grayCode</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> res<span class="token punctuation">;</span>
        <span class="token keyword">int</span> count<span class="token operator">=</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span>n<span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> loop<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> loop<span class="token operator">&lt;</span>count<span class="token punctuation">;</span> <span class="token operator">++</span>loop<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span> loop<span class="token operator">^</span><span class="token punctuation">(</span> loop<span class="token operator">&gt;&gt;</span><span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="数字-找规律题解"><a href="#数字-找规律题解" class="header-anchor">#</a> 数字-找规律题解</h2> <h3 id="_1-剑指-offer-44-数字序列中某一位的数字"><a href="#_1-剑指-offer-44-数字序列中某一位的数字" class="header-anchor">#</a> 1.<a href="https://leetcode-cn.com/problems/shu-zi-xu-lie-zhong-mou-yi-wei-de-shu-zi-lcof/" target="_blank" rel="noopener noreferrer">剑指 Offer 44. 数字序列中某一位的数字<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <ul><li><a href="https://leetcode-cn.com/problems/shu-zi-xu-lie-zhong-mou-yi-wei-de-shu-zi-lcof/" target="_blank" rel="noopener noreferrer">剑指 Offer 44. 数字序列中某一位的数字<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://leetcode-cn.com/problems/nth-digit/" target="_blank" rel="noopener noreferrer">400. 第 N 位数字<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="数字规律"><a href="#数字规律" class="header-anchor">#</a> 数字规律！</h3> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">int</span> <span class="token function">findNthDigit</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token operator">==</span>n <span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">/*规律
            1-9（总共9-1+1=9）
            10-99（总共99-10+1=90）
            1000-999（总共999-1000+1=900）
            ...
        */</span>
        <span class="token keyword">int</span> Left<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>             <span class="token comment">//目前，开始的数字位置</span>
        <span class="token keyword">long</span> <span class="token keyword">long</span> count<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">;</span>            <span class="token comment">//至今数位个数</span>
        <span class="token keyword">long</span> <span class="token keyword">long</span> cur_digit_length<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//当前元素的数位</span>

        <span class="token keyword">int</span> res<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span> n <span class="token operator">&gt;</span> count <span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            n<span class="token operator">-=</span>count<span class="token punctuation">;</span>
            cur_digit_length<span class="token operator">++</span><span class="token punctuation">;</span> 

            Left<span class="token operator">*=</span><span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">//更新</span>
            count<span class="token operator">=</span> <span class="token number">9</span> <span class="token operator">*</span> Left <span class="token operator">*</span> cur_digit_length<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">long</span> <span class="token keyword">long</span> num<span class="token operator">=</span> Left<span class="token operator">+</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span>cur_digit_length<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">to_string</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">[</span> <span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span>cur_digit_length <span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token char">'0'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="lru题解的模版✅"><a href="#lru题解的模版✅" class="header-anchor">#</a> LRU题解的模版✅</h2> <ul><li>1、用STL的list双向链表，精简代码</li> <li>2、反思了一下，以前为什么C++设计的时候，迭代器有了end还要rbegin</li> <li>3、这类设计数据结构的方式让我们思考C语言的严版的设计方式和我们C++面向对象的设计方式的异同</li> <li>C++设计数据结构，感觉就是推广了C语言数据结构的设计方式，思维方式就很想this指针如何用C语言实现一样</li> <li>4、哈希的时候，那个key或者val，你可以展开思路！比如到迭代器！数组！数组套迭代器啥的！</li></ul> <p>//要使用<code>unorder_map</code>,它底层是散列，只会映射而不用排序,能够实现$O(1)$
//体现了STL中为什么，有end还要有rbegin的原因
//因为end指向的是指向最后一个元素的下一个节点，而rebgin体现的却是<strong>倒数第一个元素的位置</strong></p> <h3 id="_2-ac代码"><a href="#_2-ac代码" class="header-anchor">#</a> 2.AC代码</h3> <ul><li><p><a href="https://leetcode-cn.com/problems/lru-cache/submissions/" target="_blank" rel="noopener noreferrer">1、LRU传送门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://leetcode-cn.com/problems/lru-cache-lcci/" target="_blank" rel="noopener noreferrer">2、LRU传送门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h4 id="get借助put精简代码的版本」迭代器的转换"><a href="#get借助put精简代码的版本」迭代器的转换" class="header-anchor">#</a> get借助put精简代码的版本」迭代器的转换</h4> <h4 id="✅记忆"><a href="#✅记忆" class="header-anchor">#</a> ✅记忆</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>std::next<span class="token punctuation">(</span>it<span class="token punctuation">)</span>.base<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> //反向迭代器转换为正向迭代器！
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">LRUCache</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    list<span class="token operator">&lt;</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span> m_list<span class="token punctuation">;</span> 										<span class="token comment">//key. val 不能仅val，因为我put的时候要删掉key的map</span>
    map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> list<span class="token operator">&lt;</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator <span class="token operator">&gt;</span> m_mp<span class="token punctuation">;</span> 	<span class="token comment">//key-&gt;iterator</span>
    <span class="token keyword">int</span> m_capacity<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">LRUCache</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">m_capacity</span><span class="token punctuation">(</span>capacity<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">int</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> m_mp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">!=</span> m_mp<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token keyword">int</span> t_key<span class="token operator">=</span>key<span class="token punctuation">,</span> t_val<span class="token operator">=</span> m_mp<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">-&gt;</span>second <span class="token punctuation">;</span>
            <span class="token function">put</span><span class="token punctuation">(</span> t_key<span class="token punctuation">,</span> t_val <span class="token punctuation">)</span><span class="token punctuation">;</span> 				<span class="token comment">//重新放进去，借助put精简代码</span>
            <span class="token keyword">return</span> t_val<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
    
    <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      
        <span class="token comment">//如果存在原本的key，管你一样还是不一样</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> m_mp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">!=</span> m_mp<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            m_list<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span> m_mp<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 		<span class="token comment">//清除list</span>
            m_mp<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span> m_mp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//清除map</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//如果不存在、转换成的不存在</span>
        <span class="token comment">//去除「最久没访问的」</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> m_list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span>m_capacity <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//不是front是begin</span>
            list<span class="token operator">&lt;</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it<span class="token operator">=</span> m_list<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_mp<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span> m_mp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> it<span class="token operator">-&gt;</span>first <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_list<span class="token punctuation">.</span><span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//小的</span>
        <span class="token comment">//「坑点！反向迭代器和正向迭代器的转换！」</span>
        <span class="token comment">//std::next(it) 返回指向反向迭代器的下一个元素的迭代器，再通过 std::next(it).base() 将其转换为正向迭代器。</span>
        <span class="token comment">//注意，it 必须是 auto 类型，因为它的类型是一个反向迭代器，无法直接转换为正向迭代器</span>
        m_list<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span> <span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
      
        <span class="token keyword">auto</span> it <span class="token operator">=</span> m_list<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token comment">//发现下面的转换结果是一样的</span>
      	<span class="token comment">//cout&lt;&lt;&quot;tempkey=&quot;&lt;&lt;it-&gt;first&lt;&lt;&quot; val=&quot;&lt;&lt;it-&gt;second&lt;&lt;endl;</span>
        <span class="token comment">//cout&lt;&lt;&quot;key=&quot;&lt;&lt;std::next(it).base()-&gt;first&lt;&lt;&quot; val=&quot;&lt;&lt;std::next(it).base()-&gt;second&lt;&lt;endl;</span>
        m_mp<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">=</span>std<span class="token double-colon punctuation">::</span><span class="token function">next</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">base</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Your LRUCache object will be instantiated and called as such:
 * LRUCache* obj = new LRUCache(capacity);
 * int param_1 = obj-&gt;get(key);
 * obj-&gt;put(key,value);
 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><ul><li>上面的，可以不使用迭代器转换，但是会超时22/22</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>auto it <span class="token operator">=</span> m_list.begin<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
int <span class="token assign-left variable">loop</span><span class="token operator">=</span>m_list.size<span class="token punctuation">(</span><span class="token punctuation">)</span>-1<span class="token punctuation">;</span>
//超时原因在这，但是没办法！因为it<span class="token operator">+=</span>loop不行！it<span class="token operator">=</span>it+loop也不行！
while<span class="token punctuation">(</span> loop-- <span class="token punctuation">)</span><span class="token punctuation">{</span>
it++<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="✅最终改善后的代码-我们把最久的放在list的末尾而不是首位-避免迭代器转换"><a href="#✅最终改善后的代码-我们把最久的放在list的末尾而不是首位-避免迭代器转换" class="header-anchor">#</a> ✅最终改善后的代码！我们把最久的放在list的末尾而不是首位-避免迭代器转换</h4> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">LRUCache</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    list<span class="token operator">&lt;</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span> m_list<span class="token punctuation">;</span> <span class="token comment">//key. val 不能仅val，因为我put的时候要删掉key的map</span>
    map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> list<span class="token operator">&lt;</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator <span class="token operator">&gt;</span> m_mp<span class="token punctuation">;</span> <span class="token comment">//key-&gt;iterator</span>
    <span class="token keyword">int</span> m_capacity<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">LRUCache</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">m_capacity</span><span class="token punctuation">(</span>capacity<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">int</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> m_mp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">!=</span> m_mp<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token keyword">int</span> t_key<span class="token operator">=</span>key<span class="token punctuation">,</span> t_val<span class="token operator">=</span> m_mp<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">-&gt;</span>second <span class="token punctuation">;</span>
            <span class="token function">put</span><span class="token punctuation">(</span> t_key<span class="token punctuation">,</span> t_val <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//重新放进去</span>
            <span class="token keyword">return</span> t_val<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        
    <span class="token punctuation">}</span>
    
    <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//如果存在</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> m_mp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">!=</span> m_mp<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            m_list<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span> m_mp<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//清除list</span>
            m_mp<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span> m_mp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//清除map</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//如果不存在+转换成的不存在</span>
        <span class="token comment">//比较大了 </span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> m_list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">==</span>m_capacity <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//这里改了方向</span>
            <span class="token keyword">auto</span> it<span class="token operator">=</span> m_list<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//反向迭代器，但是这里没事！因为我后续只需要获得对应的元素</span>
            m_mp<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span> m_mp<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span> it<span class="token operator">-&gt;</span>first <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
            m_list<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        
        m_list<span class="token punctuation">.</span><span class="token function">push_front</span><span class="token punctuation">(</span> <span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> it <span class="token operator">=</span> m_list<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//正向迭代器！</span>
        m_mp<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token operator">=</span>it<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Your LRUCache object will be instantiated and called as such:
 * LRUCache* obj = new LRUCache(capacity);
 * int param_1 = obj-&gt;get(key);
 * obj-&gt;put(key,value);
 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h3 id="_3-面试问-正向迭代器和反向迭代器的区别"><a href="#_3-面试问-正向迭代器和反向迭代器的区别" class="header-anchor">#</a> 3.面试问：正向迭代器和反向迭代器的区别</h3> <p>正向迭代器和反向迭代器都是用于迭代容器中元素的工具，但它们的方向不同。</p> <p>正向迭代器是一种顺序遍历容器元素的迭代器，它按照容器中元素的顺序逐个迭代。例如，在一个列表中，正向迭代器将按照列表从左到右的顺序逐个迭代列表元素。</p> <p>反向迭代器是一种逆序遍历容器元素的迭代器，它按照容器中元素的相反顺序逐个迭代。例如，在一个列表中，反向迭代器将按照列表从右到左的顺序逐个迭代列表元素。</p> <p>在C++中，可以使用<code>begin()</code>和<code>end()</code>函数获取正向迭代器，使用<code>rbegin()</code>和<code>rend()</code>函数获取反向迭代器。</p> <h2 id="trie-前缀树✅"><a href="#trie-前缀树✅" class="header-anchor">#</a> Trie-前缀树✅</h2> <ul><li><p>前缀树，又称字典树，是 N 叉树的特殊形式。</p></li> <li><p>Trie [traɪ] 读音和 try 相同，它的另一些名字有：<strong>字典树</strong>，<strong>前缀树</strong>，<strong>单词查找树</strong>等。</p></li> <li><p><a href="https://leetcode-cn.com/tag/trie/" target="_blank" rel="noopener noreferrer">LeetCode传送门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h3 id="字典树类代码"><a href="#字典树类代码" class="header-anchor">#</a> 字典树类代码</h3> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">Trie</span> 
<span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//标记是否是单词结束</span>
    <span class="token keyword">bool</span> isEnd<span class="token punctuation">;</span>
    Trie<span class="token operator">*</span> next<span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token comment">/** Initialize your data structure here. */</span>
    <span class="token function">Trie</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        isEnd <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token function">memset</span><span class="token punctuation">(</span>next<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

	<span class="token comment">/** Inserts a word into the trie. */</span>
    <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span>string word<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Trie<span class="token operator">*</span> node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> c <span class="token operator">:</span> word<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token operator">-&gt;</span>next<span class="token punctuation">[</span>c<span class="token operator">-</span><span class="token char">'a'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                node<span class="token operator">-&gt;</span>next<span class="token punctuation">[</span>c<span class="token operator">-</span><span class="token char">'a'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Trie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            node <span class="token operator">=</span> node<span class="token operator">-&gt;</span>next<span class="token punctuation">[</span>c<span class="token operator">-</span><span class="token char">'a'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        node<span class="token operator">-&gt;</span>isEnd <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/** Returns if the word is in the trie. */</span>
    <span class="token keyword">bool</span> <span class="token function">search</span><span class="token punctuation">(</span>string word<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Trie<span class="token operator">*</span> node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> c <span class="token operator">:</span> word<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            node <span class="token operator">=</span> node<span class="token operator">-&gt;</span>next<span class="token punctuation">[</span>c <span class="token operator">-</span> <span class="token char">'a'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//借助isEnd来看是不是最终的节点</span>
        <span class="token keyword">return</span> node<span class="token operator">-&gt;</span>isEnd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/** Returns if there is any word in the trie that starts with the given prefix. */</span>
    <span class="token keyword">bool</span> <span class="token function">startsWith</span><span class="token punctuation">(</span>string prefix<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Trie<span class="token operator">*</span> node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> c <span class="token operator">:</span> prefix<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            node <span class="token operator">=</span> node<span class="token operator">-&gt;</span>next<span class="token punctuation">[</span>c<span class="token operator">-</span><span class="token char">'a'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//比如，apple的前缀可以是app,apple</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Your Trie object will be instantiated and called as such:
 * Trie* obj = new Trie();
 * obj-&gt;insert(word);
 * bool param_2 = obj-&gt;search(word);
 * bool param_3 = obj-&gt;startsWith(prefix);
 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h2 id="大数算法『模板』"><a href="#大数算法『模板』" class="header-anchor">#</a> 大数算法『模板』</h2> <h3 id="_1-大数加法"><a href="#_1-大数加法" class="header-anchor">#</a> 1.大数加法</h3> <ul><li>牛客网，<a href="https://www.nowcoder.com/questionTerminal/c56f6c70fb3f4849bc56e33ff2a50b6b" target="_blank" rel="noopener noreferrer">两个链表生成相加链表<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-txt line-numbers-mode"><pre class="language-txt"><code>1、『逆向思维』去模拟
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-大数乘法⭐️"><a href="#_2-大数乘法⭐️" class="header-anchor">#</a> 2.大数乘法⭐️</h3> <ul><li>牛客网，<a href="https://blog.nowcoder.net/n/21c559cb23e74786888345b361fa0c62" target="_blank" rel="noopener noreferrer">大数乘法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（两个正数版本）『我的博客题解』</li> <li>乘法的坑比加法多！✔️</li> <li><a href="https://leetcode-cn.com/problems/multiply-strings/" target="_blank" rel="noopener noreferrer">LeetCode43. 字符串相乘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>对『写代码前，测试先行』的理解更深刻</li></ul></li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token number">1</span>、注意，两个为<span class="token number">0</span>的时候，要特判『不然，会有一个样例过不了』
<span class="token number">2</span>、『逆向思维』去模拟
<span class="token number">3</span>、用数组的下标<span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span>去模拟，<span class="token number">10</span><span class="token operator">^</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token operator">^</span><span class="token number">1</span>啥的
<span class="token number">4</span>、一定要找到第<span class="token number">1</span>个不是<span class="token number">0</span>的数字，然后再组装回来
    
样例举例
Len1 Len2   Len		长度
<span class="token number">0</span>	 <span class="token number">123</span>    <span class="token number">0</span>		特判
<span class="token number">123</span>  <span class="token number">0</span>	    <span class="token number">0</span>		特判	
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>    
<span class="token number">2</span>    <span class="token number">3</span>      <span class="token number">6</span>		Len1<span class="token operator">+</span>Len2<span class="token operator">-</span><span class="token number">1</span>
<span class="token number">2</span>    <span class="token number">5</span>      <span class="token number">10</span>		Len1<span class="token operator">+</span>Len2
<span class="token number">10</span>   <span class="token number">10</span>     <span class="token number">100</span>     Len1<span class="token operator">+</span>Len2<span class="token operator">-</span><span class="token number">1</span>
<span class="token number">20</span>   <span class="token number">50</span>     <span class="token number">1000</span>	Len1<span class="token operator">+</span>Len2
规律：我们的结果最大只需开
    Len1<span class="token operator">+</span>Len2
    然后，自己想办法，获得啥时候<span class="token operator">-</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    string <span class="token function">multiply</span><span class="token punctuation">(</span>string num1<span class="token punctuation">,</span> string num2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token comment">//代码健壮性</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token operator">==</span>num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token operator">==</span>num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token string">&quot;error num1.size()||nums2.size()&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
        string res<span class="token punctuation">;</span>
        <span class="token comment">//*0的特判</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token operator">==</span>num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token char">'0'</span><span class="token operator">==</span>num1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> res<span class="token operator">+=</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token number">1</span><span class="token operator">==</span>num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token char">'0'</span><span class="token operator">==</span>num2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> res<span class="token operator">+=</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">reverse</span><span class="token punctuation">(</span> num1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> num1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">reverse</span><span class="token punctuation">(</span> num2<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> num2<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//可能是Len1+Len2-1  Len1+Len2 两种</span>
        <span class="token comment">//vector自动初始化为全0</span>
        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">temp</span><span class="token punctuation">(</span> num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">int</span> one<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> one<span class="token operator">&lt;</span>num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>one <span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> two<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> two<span class="token operator">&lt;</span>num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>two <span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">int</span> val<span class="token operator">=</span><span class="token punctuation">(</span>num1<span class="token punctuation">[</span>one<span class="token punctuation">]</span><span class="token operator">-</span><span class="token char">'0'</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>num2<span class="token punctuation">[</span>two<span class="token punctuation">]</span><span class="token operator">-</span><span class="token char">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                temp<span class="token punctuation">[</span> one<span class="token operator">+</span>two <span class="token punctuation">]</span><span class="token operator">+=</span>val<span class="token punctuation">;</span>
                
                <span class="token comment">//注意要处理进位！！</span>
                <span class="token keyword">int</span> carry<span class="token operator">=</span>temp<span class="token punctuation">[</span>one<span class="token operator">+</span>two<span class="token punctuation">]</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">;</span>
                temp<span class="token punctuation">[</span>one<span class="token operator">+</span>two<span class="token punctuation">]</span><span class="token operator">%=</span><span class="token number">10</span><span class="token punctuation">;</span>

                <span class="token keyword">int</span> curPos<span class="token operator">=</span>one<span class="token operator">+</span>two<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span><span class="token punctuation">(</span> carry <span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    temp<span class="token punctuation">[</span> curPos <span class="token punctuation">]</span><span class="token operator">+=</span>carry<span class="token punctuation">;</span>
                    carry<span class="token operator">=</span>temp<span class="token punctuation">[</span> curPos <span class="token punctuation">]</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">;</span>
                    temp<span class="token punctuation">[</span>curPos<span class="token punctuation">]</span><span class="token operator">%=</span><span class="token number">10</span><span class="token punctuation">;</span>
                    <span class="token operator">++</span>curPos<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> pos<span class="token operator">=</span>num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span> pos<span class="token operator">--</span> <span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span> temp<span class="token punctuation">[</span>pos<span class="token punctuation">]</span> <span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">//搞定，10*10=100，temp中显示的0010这样的状况</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span> pos<span class="token operator">&gt;=</span><span class="token number">0</span> <span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            res<span class="token operator">+=</span><span class="token punctuation">(</span>temp<span class="token punctuation">[</span>pos<span class="token punctuation">]</span><span class="token operator">+</span><span class="token char">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token operator">--</span>pos<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><h3 id="_3-大数阶乘"><a href="#_3-大数阶乘" class="header-anchor">#</a> 3.大数阶乘</h3> <ul><li>N的<a href="https://www.nowcoder.com/practice/f54d8e6de61e4efb8cce3eebfd0e0daa?tab=answerKey" target="_blank" rel="noopener noreferrer">阶乘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <blockquote><p>参考题解：<a href="https://blog.nowcoder.net/n/158ab1f38b3a4e75b79788e92139a8e2" target="_blank" rel="noopener noreferrer">牛客网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>用<span class="token keyword">long</span>数组存储阶乘结果，数组中的每个数存储阶乘的<span class="token number">4</span>位<span class="token number">10</span>进制数，不足的用<span class="token number">0</span>补充。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="位运算-规律"><a href="#位运算-规律" class="header-anchor">#</a> 位运算-规律</h2> <h3 id="_1-交换"><a href="#_1-交换" class="header-anchor">#</a> 1.交换</h3> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
a<span class="token operator">=</span>a<span class="token operator">^</span>b<span class="token punctuation">;</span>
b<span class="token operator">=</span>a<span class="token operator">^</span>b<span class="token punctuation">;</span>
a<span class="token operator">=</span>a<span class="token operator">^</span>b<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>记忆：观察知道，右边都是a^b</p></blockquote> <h3 id="_2-异或的性质"><a href="#_2-异或的性质" class="header-anchor">#</a> 2.异或的性质</h3> <ul><li><code>0^x=0</code></li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>  如果：
      a<span class="token operator">^</span>b<span class="token operator">=</span>other<span class="token punctuation">;</span>
  那么：
      <span class="token punctuation">(</span>a<span class="token operator">^</span>other<span class="token operator">==</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  	<span class="token punctuation">(</span>b<span class="token operator">^</span>other<span class="token operator">==</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="代码实现memcpy「腾讯」"><a href="#代码实现memcpy「腾讯」" class="header-anchor">#</a> 代码实现memcpy「腾讯」</h2> <ul><li>这是一个C语言实现的<strong>内存拷贝函数</strong>，它的作用是从源地址<code>src</code>拷贝<code>num</code>个字节到目的地址<code>dest</code>。</li></ul> <p><code>为什么在构造的时候把它强制转换成char*，而不是int*等其他类型的呢？因为，memcpy可以拷贝任意类型的内存，所以如果转成int*，那么它每次只能拷贝4个字节，而对于字符串或是结构体的拷贝，它们的大小可能不是4的整数倍，这样就会导致拷贝的失败，所以为了可以拷贝全部内存，要一个一个字节的拷贝，而char*恰好满足这样的条件.</code></p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token operator">*</span><span class="token function">memcpy</span> <span class="token punctuation">(</span> <span class="token keyword">void</span> <span class="token operator">*</span> dest<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span> src<span class="token punctuation">,</span> size_t num <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">assert</span><span class="token punctuation">(</span><span class="token constant">NULL</span> <span class="token operator">!=</span>src <span class="token operator">&amp;&amp;</span> <span class="token constant">NULL</span> <span class="token operator">!=</span>dest<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//「坑1」断言，防止空指针</span>
		<span class="token keyword">char</span> <span class="token operator">*</span>m_dest<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>dest<span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>m_src<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>src<span class="token punctuation">;</span>
  	<span class="token keyword">for</span><span class="token punctuation">(</span>size_t i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>num<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">{</span>
      m_dest<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>m_src<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  	<span class="token keyword">return</span> dest<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="代码实现memmove「腾讯」"><a href="#代码实现memmove「腾讯」" class="header-anchor">#</a> 代码实现memmove「腾讯」</h2> <ul><li><code>memmove</code>函数的作用是从源内存地址<code>src</code>处开始拷贝<code>n</code>个字节到目标内存地址<code>dest</code>处。它的优点是可以处理源内存和目标内存<strong>有重叠的</strong>情况，<strong>而<code>memcpy</code>函数则不能处理这种情况</strong>。</li></ul> <p>最后，memcpy在内存没有重复的情况下能够正确复制，若有重叠情况则复制结果错误，但是它的效率比memmove高。所以，在确定没有重复的情况下用memcpy，在不确定是否有内存重复的情况用memmove。</p> <img src="/assets/img/memmove情况.b094d8c8.png"> <p>如上！<strong>三种情况</strong>描述如下：</p> <ul><li><strong>dst</strong><code>&lt;=</code>src
<ul><li>此时，正向的拷贝即可，不会覆盖数据</li></ul></li> <li>src<code>&lt;</code><strong>dst</strong><code>&lt;</code>src+n
<ul><li>此时，需要<strong>逆向</strong>的拷贝！否则会覆盖数据</li></ul></li> <li>src+n<code>&lt;=</code><strong>dst</strong> <ul><li>此时，正向的拷贝即可，不会覆盖数据</li></ul></li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token operator">*</span> memmove （ <span class="token keyword">void</span> <span class="token operator">*</span> dst<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span> src<span class="token punctuation">,</span>size_t count<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token function">assert</span><span class="token punctuation">(</span><span class="token constant">NULL</span> <span class="token operator">!=</span>src <span class="token operator">&amp;&amp;</span> <span class="token constant">NULL</span> <span class="token operator">!=</span>dst<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//「坑1」断言，防止空指针</span>
   <span class="token keyword">void</span> <span class="token operator">*</span> ret <span class="token operator">=</span> dst<span class="token punctuation">;</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>dst <span class="token operator">&lt;=</span> src <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>dst <span class="token operator">&gt;=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>src <span class="token operator">+</span> count<span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>  <span class="token comment">// 若dst和src区域没有重叠，则从起始处开始逐一拷贝</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>count<span class="token operator">--</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
         <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>dst <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>src<span class="token punctuation">;</span>
         dst <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>dst <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
         src <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>src <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">else</span>
   <span class="token punctuation">{</span>  <span class="token comment">// 若dst和src 区域交叉，则从尾部开始向起始位置拷贝，这样可以避免数据冲突</span>
      dst <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>dst <span class="token operator">+</span> count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
      src <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>src <span class="token operator">+</span> count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span>count<span class="token operator">--</span><span class="token punctuation">)</span>
      <span class="token punctuation">{</span>
         <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>dst <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>src<span class="token punctuation">;</span>
         dst <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>dst <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
         src <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>src <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">void</span> <span class="token operator">*</span> memmove （ <span class="token keyword">void</span> <span class="token operator">*</span> dst<span class="token punctuation">,</span><span class="token keyword">const</span> <span class="token keyword">void</span> <span class="token operator">*</span> src<span class="token punctuation">,</span><span class="token class-name">size_t</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token function">assert</span><span class="token punctuation">(</span><span class="token constant">NULL</span> <span class="token operator">!=</span>src <span class="token operator">&amp;&amp;</span> <span class="token constant">NULL</span> <span class="token operator">!=</span>dst<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//「坑1」断言，防止空指针</span>
   <span class="token keyword">char</span> <span class="token operator">*</span>m_dst<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>dst<span class="token punctuation">;</span>
   <span class="token keyword">char</span> <span class="token operator">*</span>m_src<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span>src<span class="token punctuation">;</span>
  
   <span class="token keyword">if</span><span class="token punctuation">(</span> m_dst<span class="token operator">&lt;=</span> m_src <span class="token operator">||</span> m_dst<span class="token operator">&gt;=</span><span class="token punctuation">(</span>m_src<span class="token operator">+</span>n<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">memcpy</span><span class="token punctuation">(</span>m_dst<span class="token punctuation">,</span>m_src<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//情况1和3的正向拷贝</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            m_dst<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span>m_src<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//逆向拷贝</span>
        <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> dst<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="代码实现strcpy"><a href="#代码实现strcpy" class="header-anchor">#</a> 代码实现strcpy</h2> <p>​	把从src地址开始且含有<code>'\0'</code>结束符的字符串复制到以dst开始的地址空间，返回值的类型为<code>char*</code></p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">strcpy</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>dst<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>src<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">assert</span><span class="token punctuation">(</span> <span class="token constant">NULL</span><span class="token operator">!=</span>dst <span class="token operator">&amp;&amp;</span> <span class="token constant">NULL</span><span class="token operator">!=</span>src <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">char</span> <span class="token operator">*</span>ret<span class="token operator">=</span>dst<span class="token punctuation">;</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token char">'\0'</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token operator">*</span>src<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">*</span><span class="token punctuation">(</span>dst<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">(</span>src<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token operator">*</span>dst<span class="token operator">=</span><span class="token char">'\0'</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> dst<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="代码实现strlen"><a href="#代码实现strlen" class="header-anchor">#</a> 代码实现strlen</h2> <p>计算给定字符串的⻓度。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">strlen</span><span class="token punctuation">(</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>str <span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">assert</span><span class="token punctuation">(</span> <span class="token constant">NULL</span><span class="token operator">!=</span>str <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> len<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token char">'\0'</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token operator">*</span>str<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">++</span>len<span class="token punctuation">;</span>
    <span class="token operator">++</span>str<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> len<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="代码实现strcat"><a href="#代码实现strcat" class="header-anchor">#</a> 代码实现strcat</h2> <p>作⽤是把src所指字符串添加到dest结尾处。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">char</span> <span class="token operator">*</span> <span class="token function">strcat</span><span class="token punctuation">(</span> <span class="token keyword">char</span> <span class="token operator">*</span>dst<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>src <span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">assert</span><span class="token punctuation">(</span> <span class="token constant">NULL</span><span class="token operator">!=</span>dst <span class="token operator">&amp;&amp;</span> <span class="token constant">NULL</span><span class="token operator">!=</span>src <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//assert( dst &amp;&amp; src); 也是可以的</span>
  <span class="token keyword">char</span> <span class="token operator">*</span>ret<span class="token operator">=</span>dst<span class="token punctuation">;</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token char">'\0'</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token operator">*</span>dst<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">++</span>dst<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">//从'\0'添加开始</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token char">'\0'</span><span class="token operator">!=</span>src <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token operator">*</span>dst<span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token operator">*</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">++</span>dst<span class="token punctuation">;</span>
    <span class="token operator">++</span>src<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token operator">*</span>dst<span class="token operator">=</span><span class="token char">'\0'</span><span class="token punctuation">;</span>
  
  <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="代码实现strcmp「学习」"><a href="#代码实现strcmp「学习」" class="header-anchor">#</a> 代码实现strcmp「学习」</h2> <p>​	⽐较两个字符串设这两个字符串为str1，str2</p> <p>若str1 == str2，则返回零</p> <p>若str1 &lt; str2，则返回负数</p> <p>若str1 &gt; str2，则返回正数</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">strcmp</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>s1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>s2<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  	<span class="token function">assert</span><span class="token punctuation">(</span> <span class="token constant">NULL</span><span class="token operator">!=</span>s1 <span class="token operator">&amp;&amp;</span> <span class="token constant">NULL</span><span class="token operator">!=</span>s2 <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//assert( s1 &amp;&amp; s2); 也是可以的</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> s1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token char">'\0'</span> <span class="token operator">&amp;&amp;</span> s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>s1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>s1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> s2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="如何实现一个-线程安全-的shared-ptr智能指针"><a href="#如何实现一个-线程安全-的shared-ptr智能指针" class="header-anchor">#</a> 如何实现一个”线程安全“的shared_ptr智能指针？</h2> <p>这个题目拿到手后得搞清楚shared_ptr的原理
1.在其内部，给每个资源都维护了着一份计数，用来记录该份资源被几个对象共享。
2.在对象被销毁时，就说明自己不使用该资源了，对象的引用计数减一。
3.如果引用计数是0，就说明自己是最后一个使用该资源的对象，必须释放该资源；
4.如果不是0，就说明除了自己还有其他对象在使用该份资源，不能释放该资源，否则其他对象就成野指针了。</p> <p>而且题目既然要求线程安全，就得考虑下面两个问题：
1.智能指针对象中的引用技术是多个对象所共享的，<strong>两个线程同时对智能指针</strong>进行++或–运算，这个计数原来是1，++了两次可能还是2，这样引用技术就错乱了。会导致资源未释放或者程序崩溃的问题。所以只能指针中引用计数++、–是需要加锁的，也就是说引用计数的操作是线程安全的。
2.智能指针的对象存放在堆上，可能会导致线程安全问题。</p> <p>实现一个线程安全的shared_ptr智能指针需要满足以下要求：</p> <ol><li>任何时刻只能有一个线程能够修改计数器和指针。</li> <li>当一个线程正在修改计数器和指针时，其他线程不能够读取或修改计数器和指针。</li> <li>当一个线程在使用shared_ptr时，其他线程不能够销毁指向的对象。</li></ol> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;mutex&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token comment">//引用计数器</span>
<span class="token keyword">class</span> <span class="token class-name">mycounter</span><span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">mycounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">m_used</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token function">mycounter</span><span class="token punctuation">(</span> <span class="token keyword">const</span> mycounter<span class="token operator">&amp;</span> <span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">delete</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">mycounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    mycounter<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> mycounter<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">delete</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        m_used<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">int</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> m_used<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">++</span>m_used<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        m_used<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token operator">--</span>m_used<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        m_used<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">friend</span> ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span> ostream<span class="token operator">&amp;</span> os <span class="token punctuation">,</span> <span class="token keyword">const</span> mycounter<span class="token operator">&amp;</span> temp<span class="token punctuation">)</span><span class="token punctuation">{</span>
        os<span class="token operator">&lt;&lt;</span> <span class="token string">&quot;counter value=&quot;</span> <span class="token operator">&lt;&lt;</span> temp<span class="token punctuation">.</span>m_used <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> os<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">int</span> m_used<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">//核心智能指针</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span> <span class="token keyword">typename</span> <span class="token class-name">T</span> <span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">myshared_ptr</span><span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">explicit</span> <span class="token function">myshared_ptr</span><span class="token punctuation">(</span> T <span class="token operator">*</span>ptr<span class="token operator">=</span><span class="token keyword">nullptr</span> <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">m_ptr</span><span class="token punctuation">(</span>ptr<span class="token punctuation">)</span><span class="token punctuation">,</span> 
    <span class="token function">m_pCounter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token function">mycounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_pMutex</span><span class="token punctuation">(</span><span class="token keyword">new</span> mutex<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">nullptr</span><span class="token operator">!=</span>ptr <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">add_ref_count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//添加引用计数</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">myshared_ptr</span><span class="token punctuation">(</span> myshared_ptr<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">&amp;</span>sp <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span> <span class="token function">myshared_ptr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    myshared_ptr<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span> <span class="token keyword">const</span> myshared_ptr<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">&amp;</span>sp <span class="token punctuation">)</span><span class="token punctuation">;</span>
    T <span class="token operator">*</span> <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    T <span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    T <span class="token operator">*</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">int</span> <span class="token function">usecount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    T <span class="token operator">*</span>m_ptr<span class="token punctuation">;</span>
    mutex <span class="token operator">*</span> m_pMutex<span class="token punctuation">;</span> <span class="token comment">//互斥锁</span>
    mycounter <span class="token operator">*</span>m_pCounter<span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">add_ref_count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">realse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//实现细节</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token class-name">myshared_ptr</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">myshared_ptr</span><span class="token punctuation">(</span>myshared_ptr<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token operator">&amp;</span>sp<span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token comment">//?浅拷贝✅</span>
    m_ptr<span class="token operator">=</span>sp<span class="token punctuation">.</span>m_ptr<span class="token punctuation">;</span>
    m_pCounter<span class="token operator">=</span>sp<span class="token punctuation">.</span>m_pCounter<span class="token punctuation">;</span>
    m_pMutex<span class="token operator">=</span>sp<span class="token punctuation">.</span>m_pMutex<span class="token punctuation">;</span>
    <span class="token function">add_ref_count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
myshared_ptr<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span> 
myshared_ptr<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> myshared_ptr<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span> sp<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//防止自己assign给自己✅</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>m_ptr <span class="token operator">!=</span> sp<span class="token punctuation">.</span>m_ptr<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">realse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//为什么呢？✅✅因为自身原来指向的内存引用要减1</span>

        <span class="token comment">//?浅拷贝</span>
        m_ptr<span class="token operator">=</span>sp<span class="token punctuation">.</span>m_ptr<span class="token punctuation">;</span>
        m_pCounter<span class="token operator">=</span>sp<span class="token punctuation">.</span>m_pCounter<span class="token punctuation">;</span>
        m_pMutex<span class="token operator">=</span>sp<span class="token punctuation">.</span>m_pMutex<span class="token punctuation">;</span>

        <span class="token function">add_ref_count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  	
  	<span class="token comment">//如果是自己拷贝给自己</span>
  	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
T <span class="token operator">*</span>
myshared_ptr<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_ptr<span class="token punctuation">;</span> <span class="token comment">//因为会自动去获得</span>
<span class="token punctuation">}</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
T <span class="token operator">&amp;</span>
myshared_ptr<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">*</span>m_ptr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
T <span class="token operator">*</span>
<span class="token class-name">myshared_ptr</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_ptr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">int</span>
<span class="token class-name">myshared_ptr</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">usecount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_pCounter<span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//使用class的</span>
<span class="token punctuation">}</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
myshared_ptr<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">myshared_ptr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">realse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">void</span>
<span class="token class-name">myshared_ptr</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">add_ref_count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    m_pMutex<span class="token operator">-&gt;</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//加锁</span>
    <span class="token operator">++</span><span class="token punctuation">(</span><span class="token operator">*</span>m_pCounter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//增加引用</span>
    m_pMutex<span class="token operator">-&gt;</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//解锁</span>
<span class="token punctuation">}</span>

<span class="token keyword">template</span><span class="token operator">&lt;</span> <span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">void</span>
<span class="token class-name">myshared_ptr</span><span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token function">realse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  
    <span class="token comment">//如果已经消亡了，那么不要realse了</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token operator">==</span>m_pCounter<span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
    <span class="token keyword">bool</span> deleteflag<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>
    m_pMutex<span class="token operator">-&gt;</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token operator">--</span><span class="token punctuation">(</span><span class="token operator">*</span>m_pCounter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//先-1</span>
    <span class="token comment">//如果引用计数为0，那么就消亡了</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token operator">==</span>m_pCounter<span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">delete</span> m_pCounter<span class="token punctuation">;</span>
        <span class="token keyword">delete</span> m_ptr<span class="token punctuation">;</span>
        deleteflag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    m_pMutex<span class="token operator">-&gt;</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span> deleteflag <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">delete</span> m_pMutex<span class="token punctuation">;</span> <span class="token comment">//此时才需要把互斥锁消除</span>
        <span class="token comment">//m_pMutex=nullptr;</span>
    <span class="token punctuation">}</span>
      
<span class="token punctuation">}</span>



<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br></div></div><ul><li>参考<a href="https://circletech.blog.csdn.net/article/details/121974538?spm=1001.2101.3001.6650.4&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-4-121974538-blog-104886339.pc_relevant_multi_platform_whitelistv4&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-4-121974538-blog-104886339.pc_relevant_multi_platform_whitelistv4&amp;utm_relevant_index=5" target="_blank" rel="noopener noreferrer">资料<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="旷视-实现一个简单的智能指针"><a href="#旷视-实现一个简单的智能指针" class="header-anchor">#</a> 旷视-实现一个简单的智能指针</h3> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">SharedPointer</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
     T<span class="token operator">*</span> _ptr<span class="token punctuation">;</span>
     size_t<span class="token operator">*</span> _count<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
     <span class="token function">SharedPointer</span><span class="token punctuation">(</span>T<span class="token operator">*</span> ptr <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">//补充代码</span>
     <span class="token punctuation">}</span>

    SharedPointer<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> SharedPointer<span class="token operator">&amp;</span> smptr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//补充代码</span>
    <span class="token punctuation">}</span>

    <span class="token operator">~</span><span class="token function">SharedPointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//补充代码</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">SharedPointer</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
     T<span class="token operator">*</span> _ptr<span class="token punctuation">;</span>
     size_t<span class="token operator">*</span> _count<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
     <span class="token function">SharedPointer</span><span class="token punctuation">(</span>T<span class="token operator">*</span> ptr <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>_count<span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        _ptr<span class="token operator">=</span>ptr<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

    SharedPointer<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> SharedPointer<span class="token operator">&amp;</span> smptr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token operator">==</span>smptr <span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span> 

        <span class="token keyword">if</span><span class="token punctuation">(</span> _ptr<span class="token operator">==</span>smptr<span class="token punctuation">.</span>_ptr <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">SharedPointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            _ptr<span class="token operator">=</span>smptr<span class="token punctuation">.</span>_ptr<span class="token punctuation">;</span>
            smptr<span class="token punctuation">.</span><span class="token function">increace_ptr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token operator">~</span><span class="token function">SharedPointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token operator">--</span><span class="token punctuation">(</span><span class="token operator">*</span>_count<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token number">0</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token operator">*</span>_count<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">delete</span> _ptr<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="实现一个unique-ptr-并且讲一下其raii"><a href="#实现一个unique-ptr-并且讲一下其raii" class="header-anchor">#</a> 实现一个unique_ptr，并且讲一下其RAII</h2> <p>先说结论，智能指针都是非线程安全的。</p> <ul><li>学这个，一定要会move语句，<code>std::move</code></li> <li>一旦拥有着被销毁或编程 empty，或开始拥有另一个对象，先前拥有的那个对象就会被销毁，其任何相应资源亦会被释放。</li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>参考资料：https://www.jianshu.com/p/77c2988be336</li></ul> <h2 id="实现写个-vectror"><a href="#实现写个-vectror" class="header-anchor">#</a> 实现写个 vectror</h2> <h2 id="实现单例"><a href="#实现单例" class="header-anchor">#</a> 实现单例</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">Singleton</span><span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span> <span class="token comment">//私有的</span>
    <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token keyword">const</span> Singleton<span class="token operator">&amp;</span> other<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">static</span> Singleton<span class="token operator">*</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> Singleton<span class="token operator">*</span> m_instance<span class="token punctuation">;</span>
    <span class="token keyword">static</span> pthread_mutex_t m_lock<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Singleton<span class="token operator">*</span> Singleton<span class="token double-colon punctuation">::</span>m_instance<span class="token operator">=</span><span class="token keyword">nullptr</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//懒汉式</span>
<span class="token comment">//线程非安全版本</span>
Singleton<span class="token operator">*</span> <span class="token class-name">Singleton</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_instance <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        m_instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> m_instance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//懒汉式子</span>
<span class="token comment">//线程安全版本，但锁的代价过高</span>
Singleton<span class="token operator">*</span> <span class="token class-name">Singleton</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Lock lock<span class="token punctuation">;</span> <span class="token comment">//加上锁</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_instance <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        m_instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
  	<span class="token comment">//至此加锁结束</span>
    <span class="token keyword">return</span> m_instance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//懒汉式子</span>
<span class="token comment">//线程安全版本，但锁的代价过高</span>
Singleton<span class="token operator">*</span> <span class="token class-name">Singleton</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	<span class="token function">pthread_mutex_lock</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>m_lock <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>m_instance <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        m_instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  	<span class="token function">pthread_mutex_unlock</span><span class="token punctuation">(</span> <span class="token operator">&amp;</span>m_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  	<span class="token comment">//至此加锁结束</span>
    <span class="token keyword">return</span> m_instance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//双检查锁，但由于内存读写reorder不安全</span>
Singleton<span class="token operator">*</span> <span class="token class-name">Singleton</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">if</span><span class="token punctuation">(</span>m_instance<span class="token operator">==</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//如果空，才加锁，如果不空，不用加锁的！</span>
        Lock lock<span class="token punctuation">;</span> <span class="token comment">//？？？</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>m_instance <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            m_instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token comment">//锁结束</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> m_instance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>看起来很完美，但是其实还是有问题：</p> <p>相当一段时间，迷惑了很多人，包括很多专家。最后一个java领域的专家知道了漏洞：</p> <p>由于内存读写reorder不安全</p> <p>什么叫reorder？会导致双检查锁的失效！</p> <p>常见假设：</p> <p>先构造内存，然后new，然后把地址给</p> <p>CPU层面，指令级别！reorder意思是重新排序：</p> <p>（编译器优化会导致：）先分配内存，把地址给</p> <p>reorder优化是，编译器干的！</p> <p>第一时间，解决方法，java和<code>C#</code>加了个关键字，叫volatile</p> <p>需要对<code>static Singleton* m_instance;</code>加上一个volatile，这样，编译器在编译器的时候，过程不能reorder的。是要按照常规</p> <p>那C++呢？</p> <p>VC++2005版本自家加上了volatile关键词，不是跨平台的。但是C++追求跨平台的，直到C++11后，才能有机制来实现跨平台的实现，如下：</p> <h4 id="c-11的"><a href="#c-11的" class="header-anchor">#</a> C++11的</h4> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//C++ 11版本之后的跨平台实现 (volatile)</span>
std<span class="token double-colon punctuation">::</span>atomic<span class="token operator">&lt;</span>Singleton<span class="token operator">*</span><span class="token operator">&gt;</span> Singleton<span class="token double-colon punctuation">::</span>m_instance<span class="token punctuation">;</span> <span class="token comment">//声明一个原子对象</span>
std<span class="token double-colon punctuation">::</span>mutex Singleton<span class="token double-colon punctuation">::</span>m_mutex<span class="token punctuation">;</span>

Singleton<span class="token operator">*</span> <span class="token class-name">Singleton</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Singleton<span class="token operator">*</span> tmp <span class="token operator">=</span> m_instance<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>memory_order_relaxed<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这个可以帮助我们屏蔽编译器的reorder</span>
    std<span class="token double-colon punctuation">::</span><span class="token function">atomic_thread_fence</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>memory_order_acquire<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取内存fence</span>
  
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      
        std<span class="token double-colon punctuation">::</span>lock_guard<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">&gt;</span> <span class="token function">lock</span><span class="token punctuation">(</span>m_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tmp <span class="token operator">=</span> m_instance<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>memory_order_relaxed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//取变量的时候，以这种方式来取</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            tmp <span class="token operator">=</span> <span class="token keyword">new</span> Singleton<span class="token punctuation">;</span>
            std<span class="token double-colon punctuation">::</span><span class="token function">atomic_thread_fence</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>memory_order_release<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//释放内存fence</span>
            m_instance<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>memory_order_relaxed<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//C++ 11版本之后的跨平台实现 (volatile)</span>
atomic<span class="token operator">&lt;</span>Singleton<span class="token operator">*</span><span class="token operator">&gt;</span> Singleton<span class="token double-colon punctuation">::</span>m_instance<span class="token punctuation">;</span> <span class="token comment">//声明一个原子对象</span>
mutex Singleton<span class="token double-colon punctuation">::</span>m_mutex<span class="token punctuation">;</span>

Singleton<span class="token operator">*</span> <span class="token class-name">Singleton</span><span class="token double-colon punctuation">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  
    Singleton<span class="token operator">*</span> tmp <span class="token operator">=</span> m_instance<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>memory_order_relaxed<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这个可以帮助我们屏蔽编译器的reorder</span>
    <span class="token function">atomic_thread_fence</span><span class="token punctuation">(</span>memory_order_acquire<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取内存fence</span>
  
    <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      
        std<span class="token double-colon punctuation">::</span>lock_guard<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>mutex<span class="token operator">&gt;</span> <span class="token function">lock</span><span class="token punctuation">(</span>m_mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tmp <span class="token operator">=</span> m_instance<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>memory_order_relaxed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//取变量的时候，以这种方式来取</span>
      
        <span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            tmp <span class="token operator">=</span> <span class="token keyword">new</span> Singleton<span class="token punctuation">;</span>
          
            std<span class="token double-colon punctuation">::</span><span class="token function">atomic_thread_fence</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>memory_order_release<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//释放内存fence</span>
            m_instance<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> memory_order_relaxed<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="k个1组反转链表"><a href="#k个1组反转链表" class="header-anchor">#</a> k个1组反转链表</h2> <ul><li>个人模版：<a href="https://leetcode.cn/problems/reverse-nodes-in-k-group/" target="_blank" rel="noopener noreferrer">https://leetcode.cn/problems/reverse-nodes-in-k-group/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>解体核心：
<ul><li>要有哨兵</li> <li>要注意翻转后的位置</li> <li>要注意k个一组，循环的时候是循环k-1次</li></ul></li></ul></li></ul> <img src="/assets/img/k个一组反转链表.e56889f2.png"> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     ListNode *next;
 *     ListNode() : val(0), next(nullptr) {}
 *     ListNode(int x) : val(x), next(nullptr) {}
 *     ListNode(int x, ListNode *next) : val(x), next(next) {}
 * };
 */</span>

<span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    ListNode<span class="token operator">*</span> <span class="token function">reverse</span><span class="token punctuation">(</span> ListNode <span class="token operator">*</span>head <span class="token punctuation">)</span><span class="token punctuation">{</span>
        ListNode <span class="token operator">*</span> sentry<span class="token operator">=</span><span class="token keyword">nullptr</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token keyword">nullptr</span><span class="token operator">!=</span>head <span class="token punctuation">)</span><span class="token punctuation">{</span>
            ListNode <span class="token operator">*</span>temp<span class="token operator">=</span>head<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>

            head<span class="token operator">-&gt;</span>next<span class="token operator">=</span>sentry<span class="token punctuation">;</span>
            sentry<span class="token operator">=</span>head<span class="token punctuation">;</span>
            head<span class="token operator">=</span>temp<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sentry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    ListNode<span class="token operator">*</span> <span class="token function">reverseKGroup</span><span class="token punctuation">(</span>ListNode<span class="token operator">*</span> head<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ListNode<span class="token operator">*</span> dummy<span class="token operator">=</span><span class="token keyword">new</span> <span class="token function">ListNode</span><span class="token punctuation">(</span> INT_MAX <span class="token punctuation">)</span><span class="token punctuation">;</span>

        ListNode<span class="token operator">*</span> preblock_tail<span class="token operator">=</span>dummy<span class="token punctuation">;</span>
        ListNode<span class="token operator">*</span> left_k<span class="token operator">=</span>head<span class="token punctuation">;</span>
        ListNode<span class="token operator">*</span> right_k<span class="token operator">=</span>head<span class="token punctuation">;</span>  <span class="token comment">//初始位置</span>
        ListNode<span class="token operator">*</span> nextblock_head<span class="token operator">=</span>head<span class="token punctuation">;</span> <span class="token comment">//暂时未知</span>

        <span class="token comment">//如果更新后的，后半部分链表不为空，我们尝试一下</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token keyword">nullptr</span><span class="token operator">!=</span>nextblock_head <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//move right, k-1</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>k <span class="token operator">&amp;&amp;</span> <span class="token keyword">nullptr</span><span class="token operator">!=</span>right_k<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">{</span>
                right_k<span class="token operator">=</span>right_k<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">//说明right和right不足k-1的距离，也就是【left，right】不足k个</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">nullptr</span><span class="token operator">==</span>right_k <span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            nextblock_head<span class="token operator">=</span>right_k<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
            right_k<span class="token operator">-&gt;</span>next<span class="token operator">=</span><span class="token keyword">nullptr</span><span class="token punctuation">;</span> <span class="token comment">//截断和nextblock的连接</span>

            <span class="token function">reverse</span><span class="token punctuation">(</span> left_k <span class="token punctuation">)</span><span class="token punctuation">;</span>

            preblock_tail<span class="token operator">-&gt;</span>next<span class="token operator">=</span>right_k<span class="token punctuation">;</span>
            left_k<span class="token operator">-&gt;</span>next<span class="token operator">=</span>nextblock_head<span class="token punctuation">;</span>

            <span class="token comment">//update data</span>
            preblock_tail<span class="token operator">=</span>left_k<span class="token punctuation">;</span>
            left_k<span class="token operator">=</span>nextblock_head<span class="token punctuation">;</span>
            right_k<span class="token operator">=</span>nextblock_head<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        ListNode<span class="token operator">*</span> ret<span class="token operator">=</span>dummy<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>
        <span class="token keyword">delete</span> dummy<span class="token punctuation">;</span>
        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7b0a0df4.js" defer></script><script src="/assets/js/2.fd3114d8.js" defer></script><script src="/assets/js/7.697ae5ac.js" defer></script>
  </body>
</html>
